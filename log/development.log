Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (63.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (73.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreatePurchasers (20131205205126)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (101.5ms)[0m  [1mCREATE TABLE "purchasers" ("id" serial primary key, "name" character varying(255), "purchase_count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205126')
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateMerchants (20131205205310)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (95.9ms)[0m  [1mCREATE TABLE "merchants" ("id" serial primary key, "name" character varying(255), "address" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205310')
  [1m[36m (8.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateItems (20131205205331)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (76.3ms)[0m  [1mCREATE TABLE "items" ("id" serial primary key, "description" character varying(255), "price" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205331')
  [1m[36m (18.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-12-05 13:00:57 -0800
Connecting to database specified by database.yml
Served asset /rails.png - 200 OK (31ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Connecting to database specified by database.yml
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.1ms)
Compiled imports.css  (81ms)  (pid 30338)
Compiled application.css  (85ms)  (pid 30338)
Compiled jquery.js  (4ms)  (pid 30338)
Compiled jquery_ujs.js  (0ms)  (pid 30338)
Compiled imports.js  (140ms)  (pid 30338)
Compiled application.js  (190ms)  (pid 30338)
Completed 200 OK in 303.1ms (Views: 302.6ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Served asset /application.css - 200 OK (42ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Served asset /imports.css - 200 OK (2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Served asset /jquery.js - 200 OK (6ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Served asset /application.js - 200 OK (10ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Served asset /jquery_ujs.js - 200 OK (5ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:01:06 -0800
Served asset /imports.js - 200 OK (2ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (0.4ms)
Completed 200 OK in 5.7ms (Views: 5.2ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Served asset /application.css - 304 Not Modified (5ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:02:48 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:05:02 -0800
Processing by ImportsController#new as HTML
ERROR: compiling _app_views_imports_new_html_erb__3691016956864018521_70083239103980 RAISED /home/dreamr/dev/challenges/data-engineering/migration_app/app/views/imports/new.html.erb:9: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_imports_new_html_erb__3691016956864018521_70083239103980(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "imports/new";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('<h1>Import data from CSV</h1>
<p class="note">Your file must match the following format to be accepted: 
  <a href="https://github.com/lschallenges/data-engineering/blob/master/example_input.tab">sample csv file</a></p>

');@output_buffer.append= ( form_tag );@output_buffer.safe_concat('
');@output_buffer.safe_concat('  ');@output_buffer.append= ( file_field_tag :csv_file );@output_buffer.safe_concat('
'); end 
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:297:in `module_eval'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:297:in `compile'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:244:in `block in compile!'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:232:in `synchronize'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:232:in `compile!'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:144:in `block in render'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications.rb:125:in `instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/template.rb:143:in `render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/template_renderer.rb:18:in `render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/renderer.rb:36:in `render_template'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_view/renderer/renderer.rb:17:in `render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/rendering.rb:110:in `_render_template'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/rendering.rb:88:in `render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/rendering.rb:16:in `render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/home/dreamr/.gem/ruby/2.0.0/gems/activerecord-3.2.16/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/instrumentation.rb:39:in `render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/base.rb:167:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/rendering.rb:10:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:414:in `_run__3222754386959241334__process_action__2869144020086931234__callbacks'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/callbacks.rb:17:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/rescue.rb:29:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/activerecord-3.2.16/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/base.rb:121:in `process'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/abstract_controller/rendering.rb:45:in `process'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal.rb:203:in `dispatch'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_controller/metal.rb:246:in `block in action'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/routing/route_set.rb:73:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/routing/route_set.rb:36:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/home/dreamr/.gem/ruby/2.0.0/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/home/dreamr/.gem/ruby/2.0.0/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/routing/route_set.rb:608:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/head.rb:14:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/flash.rb:242:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/cookies.rb:341:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/activerecord-3.2.16/lib/active_record/query_cache.rb:64:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `_run__1652001145037104787__call__4442106439646520365__callbacks'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/railties-3.2.16/lib/rails/rack/logger.rb:32:in `call_app'
/home/dreamr/.gem/ruby/2.0.0/gems/railties-3.2.16/lib/rails/rack/logger.rb:16:in `block in call'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/tagged_logging.rb:22:in `tagged'
/home/dreamr/.gem/ruby/2.0.0/gems/railties-3.2.16/lib/rails/rack/logger.rb:16:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/activesupport-3.2.16/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/static.rb:63:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/railties-3.2.16/lib/rails/engine.rb:484:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/railties-3.2.16/lib/rails/application.rb:231:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/railties-3.2.16/lib/rails/rack/log_tailer.rb:17:in `call'
/home/dreamr/.gem/ruby/2.0.0/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
/home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
/home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
  Rendered imports/new.html.erb within layouts/application (2.3ms)
Completed 500 Internal Server Error in 4.1ms

ActionView::Template::Error (/home/dreamr/dev/challenges/data-engineering/migration_app/app/views/imports/new.html.erb:9: syntax error, unexpected keyword_ensure, expecting end-of-input):
    6:   <%= file_field_tag :csv_file %>
    7: <% end %>
  actionpack (3.2.16) lib/action_view/template.rb:297:in `module_eval'
  actionpack (3.2.16) lib/action_view/template.rb:297:in `compile'
  actionpack (3.2.16) lib/action_view/template.rb:244:in `block in compile!'
  actionpack (3.2.16) lib/action_view/template.rb:232:in `synchronize'
  actionpack (3.2.16) lib/action_view/template.rb:232:in `compile!'
  actionpack (3.2.16) lib/action_view/template.rb:144:in `block in render'
  activesupport (3.2.16) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.16) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.16) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.16) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.16) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.16) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.16) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.16) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.16) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.16) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.16) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.16) lib/action_view/renderer/template_renderer.rb:18:in `render'
  actionpack (3.2.16) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.16) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.16) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.16) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.16) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.16) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.16) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.16) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.16) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.16) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.16) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/benchmark.rb:296:in `realtime'
  activesupport (3.2.16) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.16) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.16) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.16) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.16) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.16) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.16) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.16) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.16) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.16) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.16) lib/active_support/callbacks.rb:414:in `_run__3222754386959241334__process_action__2869144020086931234__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.16) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.16) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.16) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.16) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.16) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.16) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.16) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.16) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.16) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.16) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.16) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.16) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.16) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:608:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.16) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.16) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `_run__1652001145037104787__call__4442106439646520365__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.5ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 6.3ms (Views: 6.0ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:05:16 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:06:00 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 6.7ms (Views: 6.5ms | ActiveRecord: 0.0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:06:00 -0800
Served asset /imports.css - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:00 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:06:00 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:00 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:00 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:01 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 9.9ms (Views: 9.6ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Served asset /jquery_ujs.js - 304 Not Modified (1ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:29 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 8.3ms (Views: 7.9ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Served asset /application.css - 304 Not Modified (2ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Served asset /application.js - 304 Not Modified (34ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:06:46 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started PUT "/imports/create" for 127.0.0.1 at 2013-12-05 13:06:54 -0800

ActionController::RoutingError (No route matches [PUT] "/imports/create"):
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 10.6ms (Views: 9.8ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:14 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/imports" for 127.0.0.1 at 2013-12-05 13:07:20 -0800

ActionController::RoutingError (No route matches [GET] "/imports"):
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 6.5ms (Views: 6.2ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:26 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>"example_input.tab", "commit"=>"import!"}
  Rendered imports/create.html.erb within layouts/application (0.4ms)
Completed 200 OK in 6.2ms (Views: 5.5ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Served asset /application.css - 304 Not Modified (8ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:07:30 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 13:07:50 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>"example_input.tab", "commit"=>"import!"}
Completed 500 Internal Server Error in 0.5ms

RuntimeError ({"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>"example_input.tab", "commit"=>"import!", "controller"=>"imports", "action"=>"create"}):
  app/controllers/imports_controller.rb:6:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 13:08:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>"example_input.tab", "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

RuntimeError ({"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>"example_input.tab", "commit"=>"import!", "controller"=>"imports", "action"=>"create"}):
  app/controllers/imports_controller.rb:6:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 7.9ms (Views: 7.3ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Served asset /application.css - 304 Not Modified (6ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 13:08:59 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 13:09:03 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e6f0960 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-ww3llj>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.3ms

RuntimeError ({"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e6f0960 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-ww3llj>>, "commit"=>"import!", "controller"=>"imports", "action"=>"create"}):
  app/controllers/imports_controller.rb:6:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 13:11:46 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae8030178 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-ksm3c4>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.6ms

TypeError (no implicit conversion of ActionDispatch::Http::UploadedFile into String):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreatePurchasers (20131205205126)
Migrating to CreateMerchants (20131205205310)
Migrating to CreateItems (20131205205331)
Migrating to CreatePurchases (20131205220255)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreatePurchasers (20131205205126)
Migrating to CreateMerchants (20131205205310)
Migrating to CreateItems (20131205205331)
Migrating to CreatePurchases (20131205220255)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (94.9ms)[0m  [1mCREATE TABLE "purchases" ("id" serial primary key, "purchaser_id" integer, "item_id" integer, "qty" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205220255')
  [1m[36m (15.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
DEPRECATION WARNING: You're trying to create an attribute `purchase_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from new at (irb):1)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35m (122.5ms)[0m  DROP DATABASE IF EXISTS "migration_app_test"
  [1m[36m (540.3ms)[0m  [1mCREATE DATABASE "migration_app_test" ENCODING = 'unicode'[0m
  [1m[35m (113.6ms)[0m  CREATE TABLE "items" ("id" serial primary key, "description" character varying(255), "price" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (153.0ms)[0m  [1mCREATE TABLE "merchants" ("id" serial primary key, "name" character varying(255), "address" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (152.3ms)[0m  CREATE TABLE "purchasers" ("id" serial primary key, "name" character varying(255), "purchase_count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (173.8ms)[0m  [1mCREATE TABLE "purchases" ("id" serial primary key, "purchaser_id" integer, "item_id" integer, "qty" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (64.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) 
  [1m[36m (51.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (7.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205220255')[0m
  [1m[35m (10.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131205205310')
  [1m[36m (10.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205205331')[0m
  [1m[35m (10.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131205205126')
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35m (228.3ms)[0m  DROP DATABASE IF EXISTS "migration_app_test"
  [1m[36m (502.7ms)[0m  [1mCREATE DATABASE "migration_app_test" ENCODING = 'unicode'[0m
  [1m[35m (96.5ms)[0m  CREATE TABLE "items" ("id" serial primary key, "description" character varying(255), "price" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (108.1ms)[0m  [1mCREATE TABLE "merchants" ("id" serial primary key, "name" character varying(255), "address" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (52.9ms)[0m  CREATE TABLE "purchasers" ("id" serial primary key, "name" character varying(255), "purchase_count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (52.8ms)[0m  [1mCREATE TABLE "purchases" ("id" serial primary key, "purchaser_id" integer, "item_id" integer, "qty" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (9.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) 
  [1m[36m (39.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (8.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205220255')[0m
  [1m[35m (10.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131205205310')
  [1m[36m (10.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205205331')[0m
  [1m[35m (10.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131205205126')


Started GET "/" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5.8ms (Views: 5.3ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Served asset /imports.css - 304 Not Modified (3ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 14:57:03 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 14:57:08 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7aec0a8b10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1pese35>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.7ms

TypeError (no implicit conversion of ActionDispatch::Http::UploadedFile into String):
  app/controllers/imports_controller.rb:8:in `read'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 14:58:42 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0d628038 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-npjlji>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.6ms

RuntimeError (#<ActionDispatch::Http::UploadedFile:0x007f7b0d628038 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-npjlji>>):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 14:59:21 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e69d8a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-emdohd>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.6ms

NoMethodError (undefined method `[]' for #<ActionDispatch::Http::UploadedFile:0x007f7b0e69d8a0>):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 14:59:42 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7afc5f9a50 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-107nfnp>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

TypeError (no implicit conversion of ActionDispatch::Http::UploadedFile into String):
  app/controllers/imports_controller.rb:8:in `read'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:00:02 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae4114930 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-8jp8ta>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

NameError (uninitialized constant ImportsController::TempFile):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:00:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e34fe00 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-ec76kv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ([["purchaser name\titem description\titem price\tpurchase count\tmerchant address\tmerchant name"], ["Snake Plissken\t$10 off $20 of food\t10.0\t2\t987 Fake St\tBob's Pizza"], ["Amy Pond\t$30 of awesome for $10\t10.0\t5\t456 Unreal Rd\tTom's Awesome Shop"], ["Marty McFly\t$20 Sneakers for $5\t5.0\t1\t123 Fake St\tSneaker Store Emporium"], ["Snake Plissken\t$20 Sneakers for $5\t5.0\t4\t123 Fake St\tSneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:01:39 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e6ba7c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-3p6hz6>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError ([["purchaser name\titem description\titem price\tpurchase count\tmerchant address\tmerchant name"], ["Snake Plissken\t$10 off $20 of food\t10.0\t2\t987 Fake St\tBob's Pizza"], ["Amy Pond\t$30 of awesome for $10\t10.0\t5\t456 Unreal Rd\tTom's Awesome Shop"], ["Marty McFly\t$20 Sneakers for $5\t5.0\t1\t123 Fake St\tSneaker Store Emporium"], ["Snake Plissken\t$20 Sneakers for $5\t5.0\t4\t123 Fake St\tSneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:02:35 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae406b470 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-zs7t63>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ([["purchaser name\titem description\titem price\tpurchase count\tmerchant address\tmerchant name"], ["Snake Plissken\t$10 off $20 of food\t10.0\t2\t987 Fake St\tBob's Pizza"], ["Amy Pond\t$30 of awesome for $10\t10.0\t5\t456 Unreal Rd\tTom's Awesome Shop"], ["Marty McFly\t$20 Sneakers for $5\t5.0\t1\t123 Fake St\tSneaker Store Emporium"], ["Snake Plissken\t$20 Sneakers for $5\t5.0\t4\t123 Fake St\tSneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:02:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae80116b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1pbnhk4>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

RuntimeError ([["purchaser name\titem description\titem price\tpurchase count\tmerchant address\tmerchant name"], ["Snake Plissken\t$10 off $20 of food\t10.0\t2\t987 Fake St\tBob's Pizza"], ["Amy Pond\t$30 of awesome for $10\t10.0\t5\t456 Unreal Rd\tTom's Awesome Shop"], ["Marty McFly\t$20 Sneakers for $5\t5.0\t1\t123 Fake St\tSneaker Store Emporium"], ["Snake Plissken\t$20 Sneakers for $5\t5.0\t4\t123 Fake St\tSneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:02:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0d784fd0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-12adsl0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ([["purchaser name\titem description\titem price\tpurchase count\tmerchant address\tmerchant name"], ["Snake Plissken\t$10 off $20 of food\t10.0\t2\t987 Fake St\tBob's Pizza"], ["Amy Pond\t$30 of awesome for $10\t10.0\t5\t456 Unreal Rd\tTom's Awesome Shop"], ["Marty McFly\t$20 Sneakers for $5\t5.0\t1\t123 Fake St\tSneaker Store Emporium"], ["Snake Plissken\t$20 Sneakers for $5\t5.0\t4\t123 Fake St\tSneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:03:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e6a21c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1w4g1oi>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError ([["purchaser name", "item description", "item price", "purchase count", "merchant address", "merchant name"], ["Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza"], ["Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop"], ["Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium"], ["Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:04:38 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7af813bc38 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1tk7rnv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.6ms

Errno::ENAMETOOLONG (File name too long - purchaser name	item description	item price	purchase count	merchant address	merchant name
Snake Plissken	$10 off $20 of food	10.0	2	987 Fake St	Bob's Pizza
Amy Pond	$30 of awesome for $10	10.0	5	456 Unreal Rd	Tom's Awesome Shop
Marty McFly	$20 Sneakers for $5	5.0	1	123 Fake St	Sneaker Store Emporium
Snake Plissken	$20 Sneakers for $5	5.0	4	123 Fake St	Sneaker Store Emporium
):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:05:12 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae800bdf0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-19qzbtr>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError (["purchaser name", "item description", "item price", "purchase count", "merchant address", "merchant name"]):
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0d60c220 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-i26gn1>>, "commit"=>"import!"}
  Rendered imports/create.html.erb within layouts/application (0.0ms)
Completed 200 OK in 6.0ms (Views: 4.6ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Served asset /application.css - 304 Not Modified (1ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Served asset /imports.css - 304 Not Modified (5ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 15:05:29 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:06:02 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e6e0600 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-mjopkg>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

ArgumentError (Unknown options:  include_header.):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:06:08 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7af802f920 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-pt7bt0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

ArgumentError (Unknown options:  include_headers.):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:07:01 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae812a830 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1lrot3v>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.3ms

IOError (closed stream):
  app/controllers/imports_controller.rb:8:in `with_index'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (33.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:07:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e5bad48 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-13nuwmb>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ([["purchaser name", "item description", "item price", "purchase count", "merchant address", "merchant name"], ["Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza"], ["Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop"], ["Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium"], ["Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:07:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e70b0a8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-fqtzr2>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

TypeError (no implicit conversion of nil into Array):
  app/controllers/imports_controller.rb:9:in `-'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:08:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7afc6cf3a8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-vk2kfi>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError (["purchaser name", "item description", "item price", "purchase count", "merchant address", "merchant name"]):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:09:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7aec0caa58 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1mbnqwm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

RuntimeError ([["Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza"], ["Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop"], ["Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium"], ["Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium"]]):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:11:00 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e5bb400 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1hq5kyd>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "$10 off $20 of food"=>"10.0", "2"=>"987 Fake St", "Bob's Pizza"=>"item description", "Amy Pond"=>"$30 of awesome for $10", "10.0"=>"5", "456 Unreal Rd"=>"Tom's Awesome Shop", "item price"=>"Marty McFly", "$20 Sneakers for $5"=>"5.0", "1"=>"123 Fake St", "Sneaker Store Emporium"=>"purchase count", "Snake Plissken"=>"$20 Sneakers for $5", "5.0"=>"4", "123 Fake St"=>"Sneaker Store Emporium", "merchant address"=>nil, "merchant name"=>nil}):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:11:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e708e70 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-lwan38>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError (["purchaser name", "Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza", "item description", "Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop", "item price", "Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium", "purchase count", "Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium", "merchant address", nil, "merchant name", nil]):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:12:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7afc6d85c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1xijzsm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

NoMethodError (undefined method `zip' for "purchaser name":String):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:13:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7af8062370 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-c76gfe>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError (["purchaser name", "Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza", "item description", "Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop", "item price", "Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium", "purchase count", "Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium", "merchant address", nil, "merchant name", nil]):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:14:46 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e5caf18 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-r1xndq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError (["purchaser name", "Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza", "item description", "Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop", "item price", "Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium", "purchase count", "Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium", "merchant address", nil, "merchant name", nil]):
  app/controllers/imports_controller.rb:11:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:15:12 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e7127e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1f6cw6f>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.6ms

Errno::ENAMETOOLONG (File name too long - purchaser name	item description	item price	purchase count	merchant address	merchant name
Snake Plissken	$10 off $20 of food	10.0	2	987 Fake St	Bob's Pizza
Amy Pond	$30 of awesome for $10	10.0	5	456 Unreal Rd	Tom's Awesome Shop
Marty McFly	$20 Sneakers for $5	5.0	1	123 Fake St	Sneaker Store Emporium
Snake Plissken	$20 Sneakers for $5	5.0	4	123 Fake St	Sneaker Store Emporium
):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:15:28 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7afc6e5d60 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-knpqxn>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError (["purchaser name", "Snake Plissken", "$10 off $20 of food", "10.0", "2", "987 Fake St", "Bob's Pizza", "item description", "Amy Pond", "$30 of awesome for $10", "10.0", "5", "456 Unreal Rd", "Tom's Awesome Shop", "item price", "Marty McFly", "$20 Sneakers for $5", "5.0", "1", "123 Fake St", "Sneaker Store Emporium", "purchase count", "Snake Plissken", "$20 Sneakers for $5", "5.0", "4", "123 Fake St", "Sneaker Store Emporium", "merchant address", nil, "merchant name", nil]):
  app/controllers/imports_controller.rb:11:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:16:29 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7af80acdf8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1b3pwme>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "$10 off $20 of food"=>"10.0", "2"=>"987 Fake St", "Bob's Pizza"=>"item description", "Amy Pond"=>"$30 of awesome for $10", "10.0"=>"5", "456 Unreal Rd"=>"Tom's Awesome Shop", "item price"=>"Marty McFly", "$20 Sneakers for $5"=>"5.0", "1"=>"123 Fake St", "Sneaker Store Emporium"=>"purchase count", "Snake Plissken"=>"$20 Sneakers for $5", "5.0"=>"4", "123 Fake St"=>"Sneaker Store Emporium", "merchant address"=>nil, "merchant name"=>nil}):
  app/controllers/imports_controller.rb:11:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (33.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:16:34 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e5ba4d8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1lo419h>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "$10 off $20 of food"=>"10.0", "2"=>"987 Fake St", "Bob's Pizza"=>"item description", "Amy Pond"=>"$30 of awesome for $10", "10.0"=>"5", "456 Unreal Rd"=>"Tom's Awesome Shop", "item price"=>"Marty McFly", "$20 Sneakers for $5"=>"5.0", "1"=>"123 Fake St", "Sneaker Store Emporium"=>"purchase count", "Snake Plissken"=>"$20 Sneakers for $5", "5.0"=>"4", "123 Fake St"=>"Sneaker Store Emporium", "merchant address"=>nil, "merchant name"=>nil}):
  app/controllers/imports_controller.rb:11:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:17:39 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e70c138 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-v4sokw>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError ([{"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}, {"purchaser name"=>"Amy Pond", "item description"=>"$30 of awesome for $10", "item price"=>"10.0", "purchase count"=>"5", "merchant address"=>"456 Unreal Rd", "merchant name"=>"Tom's Awesome Shop"}, {"purchaser name"=>"Marty McFly", "item description"=>"$20 Sneakers for $5", "item price"=>"5.0", "purchase count"=>"1", "merchant address"=>"123 Fake St", "merchant name"=>"Sneaker Store Emporium"}, {"purchaser name"=>"Snake Plissken", "item description"=>"$20 Sneakers for $5", "item price"=>"5.0", "purchase count"=>"4", "merchant address"=>"123 Fake St", "merchant name"=>"Sneaker Store Emporium"}]):
  app/controllers/imports_controller.rb:11:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:23:41 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7afc71e160 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1sz838j>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.7ms

NameError (uninitialized constant ImportsController::Items):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:23:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7ae811f110 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1qx5vt>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.4ms

NameError (uninitialized constant ImportsController::Items):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:23:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0cc847e8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1y8p39m>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.4ms

NameError (uninitialized constant ImportsController::Items):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 15:24:05 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eveM3SzUYOdVr4+u/zPaTjhEeoBPJAgsy4RPCMcso2I=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7b0e680ac0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-30338-1v4cj9m>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 34.8ms

NoMethodError (undefined method `consume' for #<Class:0x007f7b0e69efe8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml


Started GET "/" for 127.0.0.1 at 2013-12-05 18:34:25 -0800
Connecting to database specified by database.yml
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (9.6ms)
Completed 200 OK in 406.6ms (Views: 406.1ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 18:34:25 -0800
Served asset /application.css - 200 OK (11ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 18:34:25 -0800
Served asset /imports.css - 200 OK (2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 18:34:25 -0800
Served asset /jquery.js - 200 OK (4ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 18:34:25 -0800
Served asset /application.js - 200 OK (41ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 18:34:26 -0800
Served asset /jquery_ujs.js - 200 OK (3ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 18:34:26 -0800
Served asset /imports.js - 200 OK (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:34:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f32c2c9ec98 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-5923-10aebvo>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 269.6ms

NoMethodError (undefined method `consume' for #<Class:0x007f32c3278290>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (24.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:37:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f32983a8b90 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-5923-sf8yqc>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 9.4ms

NoMethodError (undefined method `consume' for #<Class:0x007f3298402618>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:37:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f32b03213d0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-5923-r0q9qe>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 10.2ms

NoMethodError (undefined method `consume' for #<Class:0x007f32b03d88c8>):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:38:10 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f32b0c0df98 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-5923-16hebdy>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.2ms

NoMethodError (undefined method `consume' for #<Class:0x007f32b0c77240>):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:38:54 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f3298617638 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-5923-18vefx0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.9ms

NoMethodError (undefined method `consume' for #<Class:0x007f329865d070>):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:39:03 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f3c806d0060 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6038-le06qe>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 27.8ms

NoMethodError (undefined method `consume' for #<Class:0x007f3c80732148>):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:42:44 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6d0060 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1d7z70d>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 60.0ms

NoMethodError (undefined method `-' for #<Hash:0x007fb1fd642e70>):
  lib/hash_to_model.rb:31:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:43:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4756f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-17m5uqz>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (247.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 02:43:44 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:43:44 UTC +00:00]]
  [1m[36m (54.0ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 323.1ms

RuntimeError (#<Purchaser id: 6, name: nil, purchase_count: nil, created_at: "2013-12-06 02:43:44", updated_at: "2013-12-06 02:43:44">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:44:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8b11b8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1u12ker>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 02:44:33 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:44:33 UTC +00:00]]
  [1m[35m (16.7ms)[0m  COMMIT
Completed 500 Internal Server Error in 36.9ms

RuntimeError (#<Purchaser id: 7, name: nil, purchase_count: nil, created_at: "2013-12-06 02:44:33", updated_at: "2013-12-06 02:44:33">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:44:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff918710 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-8y99f9>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 02:44:55 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:44:55 UTC +00:00]]
  [1m[36m (17.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (1.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."id" = $1 LIMIT 1  [["id", 8]]
Completed 500 Internal Server Error in 51.1ms

RuntimeError (#<Purchaser id: 8, name: nil, purchase_count: nil, created_at: "2013-12-06 02:44:55", updated_at: "2013-12-06 02:44:55">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:45:06 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec78bc70 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-13f4wcr>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 02:45:06 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:45:06 UTC +00:00]]
  [1m[36m (32.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 61.5ms

RuntimeError (true):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.9ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:45:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec98d640 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-envhyv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 23.2ms

RuntimeError ([]):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (10.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:45:57 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffdb1600 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-yaita1>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.3ms

RuntimeError ({"id"=>nil, "name"=>nil, "purchase_count"=>nil, "created_at"=>nil, "updated_at"=>nil}):
  lib/hash_to_model.rb:31:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:46:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7a2448 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-12zgyhn>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.4ms

RuntimeError (["id", "name", "purchase_count", "created_at", "updated_at"]):
  lib/hash_to_model.rb:31:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:46:25 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec999c60 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-2vou7v>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 02:46:25 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:46:25 UTC +00:00]]
  [1m[35m (18.8ms)[0m  COMMIT
Completed 500 Internal Server Error in 76.6ms

RuntimeError (#<Purchaser id: 10, name: nil, purchase_count: nil, created_at: "2013-12-06 02:46:25", updated_at: "2013-12-06 02:46:25">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:46:29 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffc34a98 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-y7zi82>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 02:46:29 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:46:29 UTC +00:00]]
  [1m[36m (38.7ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 43.7ms

RuntimeError (#<Purchaser id: 11, name: nil, purchase_count: nil, created_at: "2013-12-06 02:46:29", updated_at: "2013-12-06 02:46:29">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:46:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6f22c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-6vyck1>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 15.1ms

RuntimeError (["id", "name", "purchase_count", "created_at", "updated_at"]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:47:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec918ef8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-vaok4k>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 18.0ms

RuntimeError (["name", "purchase_count", "updated_at"]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:47:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff1cac88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1o26l27>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 02:47:27 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 02:47:27 UTC +00:00]]
  [1m[35m (17.5ms)[0m  COMMIT
Completed 500 Internal Server Error in 39.8ms

RuntimeError (#<Purchaser id: 12, name: nil, purchase_count: nil, created_at: "2013-12-06 02:47:27", updated_at: "2013-12-06 02:47:27">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:47:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec70dd20 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-12uoi14>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.9ms

RuntimeError (["name", "purchase_count", "updated_at"]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:47:46 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec927d68 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1v6k9dy>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.2ms

RuntimeError (["name", "purchase_count"]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:48:19 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff939d48 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-43s2hm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 21.4ms

RuntimeError ([]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:48:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec77ada8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-yzkcgc>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 15.0ms

RuntimeError ([]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:48:38 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec961bd0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-ge8adk>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 15.0ms

NoMethodError (undefined method `to_sym' for #<Hash:0x007fb1ec98fd28>):
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `select'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (34.0ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:48:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffc2de28 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-zogqfj>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 21.8ms

RuntimeError ([]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:49:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec78fd98 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1wvkqsp>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.8ms

RuntimeError ([{"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}, {"purchaser name"=>"Amy Pond", "item description"=>"$30 of awesome for $10", "item price"=>"10.0", "purchase count"=>"5", "merchant address"=>"456 Unreal Rd", "merchant name"=>"Tom's Awesome Shop"}, {"purchaser name"=>"Marty McFly", "item description"=>"$20 Sneakers for $5", "item price"=>"5.0", "purchase count"=>"1", "merchant address"=>"123 Fake St", "merchant name"=>"Sneaker Store Emporium"}, {"purchaser name"=>"Snake Plissken", "item description"=>"$20 Sneakers for $5", "item price"=>"5.0", "purchase count"=>"4", "merchant address"=>"123 Fake St", "merchant name"=>"Sneaker Store Emporium"}]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:50:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec985738 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1jz747w>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 19.0ms

NoMethodError (undefined method `stringify_keys' for [{}, {}, {}, {}]:Array):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:51:03 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec3d6f58 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1quxhoi>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 16.8ms

RuntimeError ("purchaser name"):
  lib/hash_to_model.rb:32:in `block (2 levels) in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `select'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:53:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec840850 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-16sxwkd>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.9ms

NameError (undefined local variable or method `vals' for HashToModel:Module):
  lib/hash_to_model.rb:36:in `map_attr'
  lib/hash_to_model.rb:32:in `block (2 levels) in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `select'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:53:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed185a78 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1i5jzz9>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 56.5ms

NoMethodError (undefined method `stringify_keys' for #<Array:0x007fb1fe3f1b20>):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:54:14 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4bfeb0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1e98gxp>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.5ms

RuntimeError ("purchaser name"):
  lib/hash_to_model.rb:32:in `block (2 levels) in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `select'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (12.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:54:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec88ee10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-txkgx1>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.6ms

RuntimeError ("name"):
  lib/hash_to_model.rb:32:in `block (2 levels) in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `select'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:55:35 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fdc7e398 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1sxfp0m>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 13.7ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser name, merchant name):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:55:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec648c28 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-nbc08q>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 16.1ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "merchant name"=>"Sneaker Store Emporium"}):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:56:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8e2fd8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3xa7bm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.7ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "merchant name"=>"Sneaker Store Emporium"}):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:56:34 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed1977a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-2lfa68>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.1ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "merchant name"=>"Sneaker Store Emporium"}):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:56:45 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb20035afc0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-dy7yrx>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 19.0ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "merchant name"=>"Sneaker Store Emporium"}):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:57:09 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec777c20 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1psv4u9>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.7ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "merchant name"=>"Sneaker Store Emporium"}):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:57:39 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8f75c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-6x17b1>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 16.1ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "merchant name"=>"Sneaker Store Emporium"}):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:58:19 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff094b98 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-zd0qqd>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 15.4ms

RuntimeError (name):
  lib/hash_to_model.rb:38:in `map_attr'
  lib/hash_to_model.rb:32:in `block (2 levels) in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `select'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `reduce'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:58:48 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6db8c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1xrecdv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 16.6ms

RuntimeError (["name", nil, nil, nil, nil, "name"]):
  lib/hash_to_model.rb:33:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:58:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec90c4a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-zca8wb>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 16.3ms

NoMethodError (undefined method `stringify_keys' for ["name", nil, nil, nil, nil, "name"]:Array):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:59:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff923840 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-4kgwyn>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.7ms

TypeError (no implicit conversion of String into Integer):
  lib/hash_to_model.rb:32:in `[]='
  lib/hash_to_model.rb:32:in `block (2 levels) in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `reduce'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 18:59:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec77e750 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1n1i5pu>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 17.0ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser name, merchant name):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:00:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec986700 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1muori2>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.4ms

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/lib/hash_to_model.rb:32: both block arg and actual block given):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:01:07 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff768e10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3hpq2r>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.8ms

TypeError (no implicit conversion of Array into Hash):
  lib/hash_to_model.rb:32:in `merge'
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `reduce'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:02:00 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec511b48 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-zexmu9>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:02:00 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:02:00 UTC +00:00]]
  [1m[36m (23.4ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 41.9ms

RuntimeError (#<Purchaser id: 13, name: nil, purchase_count: nil, created_at: "2013-12-06 03:02:00", updated_at: "2013-12-06 03:02:00">):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:02:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec96a5c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3w2lgw>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:02:55 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:02:55 UTC +00:00]]
  [1m[35m (10.2ms)[0m  COMMIT
Completed 500 Internal Server Error in 29.1ms

RuntimeError (#<Purchaser id: 14, name: nil, purchase_count: nil, created_at: "2013-12-06 03:02:55", updated_at: "2013-12-06 03:02:55">):
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (10.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:03:21 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffdb7fa0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-hwc82b>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00]]
  [1m[36m (18.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:21 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (0.4ms)
Completed 200 OK in 106.6ms (Views: 36.9ms | ActiveRecord: 46.0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 19:03:21 -0800
Served asset /imports.css - 304 Not Modified (10ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 19:03:22 -0800
Served asset /jquery.js - 304 Not Modified (4ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 19:03:22 -0800
Served asset /imports.js - 304 Not Modified (1ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 19:03:22 -0800
Served asset /application.css - 304 Not Modified (3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 19:03:22 -0800
Served asset /jquery_ujs.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 19:03:22 -0800
Served asset /application.js - 304 Not Modified (8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:03:48 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fdca0308 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-mhnlc0>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:03:48 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:48 UTC +00:00]]
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:03:49 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:49 UTC +00:00]]
  [1m[35m (8.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:03:49 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:49 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:03:49 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:03:49 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36mPurchaser Load (1.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
Completed 500 Internal Server Error in 76.1ms

RuntimeError (#<Purchaser id: 22, name: nil, purchase_count: nil, created_at: "2013-12-06 03:03:49", updated_at: "2013-12-06 03:03:49">):
  app/controllers/imports_controller.rb:12:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:04:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec75f490 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-jgs780>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 16.1ms

NameError (undefined local variable or method `key' for HashToModel:Module):
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:05:06 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec93a670 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1fnaatb>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 16.9ms

NoMethodError (undefined method `stringify_keys' for ["name", nil, nil, nil, nil, "name"]:Array):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:05:47 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff8ee208 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1okpz50>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 20.8ms

TypeError (exception class/object expected):
  lib/hash_to_model.rb:32:in `raise'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:05:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec77a650 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1jvs9jn>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 12.6ms

RuntimeError (["name", nil, nil, nil, nil, "name"]):
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:07:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec969718 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-2ivoe6>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.4ms

NoMethodError (undefined method `[]=' for nil:NilClass):
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `reduce'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (32.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:08:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffd41788 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3ygihe>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.2ms

NameError (undefined local variable or method `key' for HashToModel:Module):
  lib/hash_to_model.rb:32:in `block in whitelisted_attributes'
  lib/hash_to_model.rb:32:in `each'
  lib/hash_to_model.rb:32:in `map'
  lib/hash_to_model.rb:32:in `whitelisted_attributes'
  lib/hash_to_model.rb:14:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:08:25 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7aeea0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-ocexd1>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 16.2ms

NoMethodError (undefined method `stringify_keys' for ["name", "name"]:Array):
  lib/hash_to_model.rb:15:in `consume'
  app/models/purchaser.rb:5:in `consume'
  app/controllers/imports_controller.rb:9:in `block in create'
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:09:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed093d18 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1onb4sy>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00]]
  [1m[35m (22.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00]]
  [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:09:04 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
Completed 500 Internal Server Error in 111.5ms

RuntimeError (#<Purchaser id: 26, name: nil, purchase_count: nil, created_at: "2013-12-06 03:09:04", updated_at: "2013-12-06 03:09:04">):
  app/controllers/imports_controller.rb:12:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 8.0ms (Views: 7.6ms | ActiveRecord: 0.0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Served asset /jquery.js - 304 Not Modified (5ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 19:13:28 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:13:38 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7e2b88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1oqmu59>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00]]
  [1m[36m (17.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00]]
  [1m[35m (7.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00]]
  [1m[36m (9.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:13:38 UTC +00:00]]
  [1m[35m (7.4ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.5ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
Completed 500 Internal Server Error in 70.5ms

RuntimeError (#<Purchaser id: 30, name: nil, purchase_count: nil, created_at: "2013-12-06 03:13:38", updated_at: "2013-12-06 03:13:38">):
  app/controllers/imports_controller.rb:12:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:13:52 -0800

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:14: syntax error, unexpected end-of-input, expecting keyword_end):
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.16) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.16) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.16) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:608:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.16) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.16) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `_run__1398879159812432397__call__954718641153092401__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:14:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff6d6128 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-q7v9r3>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

IOError (closed stream):
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:14:32 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec641248 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-pjfil8>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

IOError (closed stream):
  app/controllers/imports_controller.rb:8:in `each'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:15:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec881f58 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-lju8o>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

IOError (closed stream):
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:15:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec93c1c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-vyjgu5>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

IOError (closed stream):
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:15:46 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe30d5d8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1sacy5m>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.4ms

IOError (closed stream):
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:17:00 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4b92e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-6cpl1e>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

IOError (closed stream):
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:17:24 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec81c400 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3nhj13>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

NameError (uninitialized constant ImportsController::Csv):
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:17:32 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec987858 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-15429sv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

TypeError (no implicit conversion of CSV into String):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:18:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff17bc00 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1wf8vra>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.6ms

Errno::ENAMETOOLONG (File name too long - purchaser name	item description	item price	purchase count	merchant address	merchant name
Snake Plissken	$10 off $20 of food	10.0	2	987 Fake St	Bob's Pizza
Amy Pond	$30 of awesome for $10	10.0	5	456 Unreal Rd	Tom's Awesome Shop
Marty McFly	$20 Sneakers for $5	5.0	1	123 Fake St	Sneaker Store Emporium
Snake Plissken	$20 Sneakers for $5	5.0	4	123 Fake St	Sneaker Store Emporium
):
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:18:52 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4cad60 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-cz10nq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

IOError (closed stream):
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:19:11 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec827990 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1n0m9s7>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

IOError (closed stream):
  app/controllers/imports_controller.rb:10:in `each'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:19:57 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec9932e8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-bpqpxz>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.0ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser name, item description, item price, purchase count, merchant address, merchant name):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:22:48 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff6d4440 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1i8vsp8>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.0ms

NameError (undefined method `purchaser_name' for class `Purchaser'):
  app/models/purchaser.rb:4:in `alias_method'
  app/models/purchaser.rb:4:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:23:06 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6c8540 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1aiy6fh>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.7ms

NameError (undefined method `name' for class `Purchaser'):
  app/models/purchaser.rb:4:in `alias_method'
  app/models/purchaser.rb:4:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:23:21 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8b3a80 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3zh9iu>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.2ms

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchaser.rb:4: syntax error, unexpected ','
  alias :purchaser_name, :name
                        ^):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (10.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:23:50 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed194208 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-frr9zx>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.3ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser name, item description, item price, purchase count, merchant address, merchant name):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:26:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffe1f740 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1pjgati>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.7ms

NoMethodError (undefined method `call' for nil:NilClass):
  app/controllers/imports_controller.rb:24:in `block in transform_hash'
  app/controllers/imports_controller.rb:18:in `each'
  app/controllers/imports_controller.rb:18:in `inject'
  app/controllers/imports_controller.rb:18:in `transform_hash'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:28:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec78b748 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-3r3oqk>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.7ms

TypeError ({} is not a symbol):
  app/controllers/imports_controller.rb:11:in `reduce'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:29:14 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec926d00 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-s5o0j4>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

IndexError (string not matched):
  app/controllers/imports_controller.rb:12:in `[]='
  app/controllers/imports_controller.rb:12:in `block (2 levels) in create'
  app/controllers/imports_controller.rb:11:in `each'
  app/controllers/imports_controller.rb:11:in `reduce'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:31:10 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fdca8ff8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-25hmtz>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

NoMethodError (undefined method `reduce' for -2031929313358835745:Fixnum):
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:31:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec466018 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1u65qxc>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

NoMethodError (undefined method `reduce' for -4254612717271020201:Fixnum):
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:32:03 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7da668 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-80zfm9>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

IndexError (string not matched):
  app/controllers/imports_controller.rb:16:in `[]='
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:32:17 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec95eea8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-xanl9z>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

IndexError (string not matched):
  app/controllers/imports_controller.rb:16:in `[]='
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:32:29 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe2c9310 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1ko0la0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

IndexError (string not matched):
  app/controllers/imports_controller.rb:16:in `[]='
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:32:48 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec49f318 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-p8wxzr>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ("purchaser name"):
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:33:00 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec81a858 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-m16nlr>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError ({}):
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:33:19 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec97cae8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1vsw219>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

TypeError (no implicit conversion of Symbol into Integer):
  app/controllers/imports_controller.rb:16:in `[]='
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:33:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe337900 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-pbdqwd>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

TypeError (no implicit conversion of Symbol into Integer):
  app/controllers/imports_controller.rb:16:in `[]='
  app/controllers/imports_controller.rb:16:in `block in underscore_hash_keys'
  app/controllers/imports_controller.rb:16:in `each'
  app/controllers/imports_controller.rb:16:in `reduce'
  app/controllers/imports_controller.rb:16:in `underscore_hash_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:33:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4ba2f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-2ukeyg>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:35:19 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec823318 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1di9i8t>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

TypeError (exception class/object expected):
  app/controllers/imports_controller.rb:11:in `raise'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:35:25 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8fb1f0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-lah0x4>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

TypeError (exception class/object expected):
  app/controllers/imports_controller.rb:11:in `raise'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:35:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed07ae80 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1x8b5an>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.1ms

TypeError (exception class/object expected):
  app/controllers/imports_controller.rb:11:in `raise'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:36:22 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff191140 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1vfperf>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

NoMethodError (undefined method `strinfify_keys!' for #<Hash:0x007fb1ff22e2b0>):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:36:32 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4e7c80 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1dovcv3>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:13:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:36:47 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8332b8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1ilqmbu>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:36:50 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec906780 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1p7c6g>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.8ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:36:53 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed1c8b70 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-n3ngpo>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.9ms

RuntimeError ({"purchaser name"=>"Snake Plissken", "item description"=>"$10 off $20 of food", "item price"=>"10.0", "purchase count"=>"2", "merchant address"=>"987 Fake St", "merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:37:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffde7f70 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-gwfodq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError ({:"purchaser name"=>"Snake Plissken", :"item description"=>"$10 off $20 of food", :"item price"=>"10.0", :"purchase count"=>"2", :"merchant address"=>"987 Fake St", :"merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:39:16 -0800

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:11: syntax error, unexpected '}', expecting '='
/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:13: syntax error, unexpected keyword_end, expecting '}'):
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.16) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.16) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.16) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:608:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.16) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.16) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `_run__1398879159812432397__call__954718641153092401__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:39:53 -0800

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:11: syntax error, unexpected '}', expecting '='
      hash = Hash[*row.to_hash.map {|k,v| h.underscore.to_sym, v }]
                                                                  ^
/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:13: syntax error, unexpected keyword_end, expecting '}'):
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.16) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.16) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.16) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:608:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.16) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.16) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `_run__1398879159812432397__call__954718641153092401__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:40:03 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec933c30 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1x5xdoi>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.0ms

NameError (undefined local variable or method `h' for #<ImportsController:0x007fb1ec92d240>):
  app/controllers/imports_controller.rb:11:in `block (2 levels) in create'
  app/controllers/imports_controller.rb:11:in `each'
  app/controllers/imports_controller.rb:11:in `map'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:40:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffdb57c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-11ebrx7>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.3ms

RuntimeError ({[:"purchaser name", "Snake Plissken"]=>[:"item description", "$10 off $20 of food"], [:"item price", "10.0"]=>[:"purchase count", "2"], [:"merchant address", "987 Fake St"]=>[:"merchant name", "Bob's Pizza"]}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:40:25 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec75eec8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1t0e8r1>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.4ms

RuntimeError ({:"purchaser name"=>"Snake Plissken", :"item description"=>"$10 off $20 of food", :"item price"=>"10.0", :"purchase count"=>"2", :"merchant address"=>"987 Fake St", :"merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:40:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8de078 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1w731rk>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.5ms

RuntimeError ({[:"purchaser name", "Snake Plissken"]=>[:"item description", "$10 off $20 of food"], [:"item price", "10.0"]=>[:"purchase count", "2"], [:"merchant address", "987 Fake St"]=>[:"merchant name", "Bob's Pizza"]}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:40:54 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed1a5440 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-iua58c>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.3ms

NoMethodError (undefined method `nspect' for #<Hash:0x007fb1ed1b5958>):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:41:00 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffe3eff0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1g38xuq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.3ms

RuntimeError ({:"purchaser name"=>"Snake Plissken", :"item description"=>"$10 off $20 of food", :"item price"=>"10.0", :"purchase count"=>"2", :"merchant address"=>"987 Fake St", :"merchant name"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:42:10 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec77f8f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1spanpd>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError ({:"PURCHASER NAME"=>"Snake Plissken", :"ITEM DESCRIPTION"=>"$10 off $20 of food", :"ITEM PRICE"=>"10.0", :"PURCHASE COUNT"=>"2", :"MERCHANT ADDRESS"=>"987 Fake St", :"MERCHANT NAME"=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:42:35 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8f9530 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-192h9wb>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

RuntimeError ({:purchaser_name=>"Snake Plissken", :item_description=>"$10 off $20 of food", :item_price=>"10.0", :purchase_count=>"2", :merchant_address=>"987 Fake St", :merchant_name=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (0.5ms)
Completed 200 OK in 38.4ms (Views: 38.0ms | ActiveRecord: 0.0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Served asset /jquery.js - 304 Not Modified (10ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 19:44:38 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:44:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ffe2f528 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-19uw0g3>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.1ms

NoMethodError (undefined method `map' for -2983348909170766361:Fixnum):
  app/controllers/imports_controller.rb:16:in `underscore_keys'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:45:03 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7747a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1b95qq2>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

RuntimeError ({:purchaser_name=>"Snake Plissken", :item_description=>"$10 off $20 of food", :item_price=>"10.0", :purchase_count=>"2", :merchant_address=>"987 Fake St", :merchant_name=>"Bob's Pizza"}):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:45:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec903468 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-gzfvlm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.3ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name, item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:45:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe4f9018 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-v3vyv6>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.1ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name, item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:45:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec3c8390 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-l3w6y6>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name, item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:46:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7a03a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-q98zuu>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.4ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:46:42 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec95ca18 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1lrm4hw>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.1ms

NoMethodError (undefined method `sanitze_attributes' for #<Class:0x007fb1ec97dc68>):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:48:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe1e91c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1uhv3h3>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.5ms

NoMethodError (undefined method `sanitze_attributes' for #<Class:0x007fb1fe3ff5e0>):
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:48:47 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4caa68 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-g548rs>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 12.9ms

NoMethodError (undefined method `protected_attributes' for #<Purchaser:0x007fb1ec6d53f8>):
  app/models/purchaser.rb:15:in `sanitize_attributes'
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:49:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec88fbf8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1f9rod2>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.0ms

NoMethodError (undefined method `keys' for #<ActiveModel::MassAssignmentSecurity::BlackList: {"id", "type"}>):
  app/models/purchaser.rb:15:in `sanitize_attributes'
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:49:39 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed1b6268 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1yf1qnc>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 42.3ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/purchaser.rb:11:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:49:50 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4bb108 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-btsx9l>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:49:50 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (0.1ms)
Completed 200 OK in 71.0ms (Views: 12.3ms | ActiveRecord: 31.5ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 19:49:51 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 19:49:51 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 19:49:51 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 19:49:51 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 19:49:51 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 19:49:51 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:50:24 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec883ce0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-mteai2>>, "commit"=>"import!"}
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00]]
  [1m[35m (14.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00]]
  [1m[36m (21.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:25 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  Rendered imports/create.html.erb within layouts/application (8.3ms)
Completed 200 OK in 82.2ms (Views: 14.7ms | ActiveRecord: 54.9ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 19:50:25 -0800
Served asset /application.css - 304 Not Modified (6ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 19:50:25 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:25 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:25 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:25 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:25 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:50:54 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed195810 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-6s5q32>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00]]
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 03:50:54 UTC +00:00]]
  [1m[35m (8.0ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.9ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (4.7ms)
Completed 200 OK in 101.5ms (Views: 16.6ms | ActiveRecord: 38.2ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 19:50:54 -0800
Served asset /application.css - 304 Not Modified (6ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 19:50:54 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:55 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:55 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:55 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 19:50:55 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:51:29 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec642058 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1m7p8fw>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 12.4ms

RuntimeError ({}):
  app/models/purchaser.rb:16:in `sanitize_attributes'
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:51:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8c5fa0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1w8gxe7>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 15.1ms

RuntimeError (:purchaser_name):
  app/models/purchaser.rb:16:in `block in sanitize_attributes'
  app/models/purchaser.rb:16:in `select'
  app/models/purchaser.rb:16:in `sanitize_attributes'
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:52:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe390208 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-10nzz4m>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.0ms

RuntimeError (["name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:16:in `block in sanitize_attributes'
  app/models/purchaser.rb:16:in `select'
  app/models/purchaser.rb:16:in `sanitize_attributes'
  app/models/purchaser.rb:10:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:54:05 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6bcbf0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-nor92q>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.9ms

RuntimeError (["name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:14:in `block in sanitize_attributes'
  app/models/purchaser.rb:14:in `select'
  app/models/purchaser.rb:14:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:54:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8f7a28 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1imlzvt>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.0ms

RuntimeError (["name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:14:in `block in sanitize_attributes'
  app/models/purchaser.rb:14:in `select'
  app/models/purchaser.rb:14:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:54:45 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1fe51ee30 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-b6eyen>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 13.4ms

RuntimeError (["name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:14:in `block in sanitize_attributes'
  app/models/purchaser.rb:14:in `select'
  app/models/purchaser.rb:14:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:55:11 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec482498 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-a8cizm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.6ms

RuntimeError (["name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:14:in `block in sanitize_attributes'
  app/models/purchaser.rb:14:in `select'
  app/models/purchaser.rb:14:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:55:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec7ebaf8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-n1nvig>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.8ms

RuntimeError (["id", "type"]):
  app/models/purchaser.rb:13:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:55:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec992168 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1um0fc3>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.8ms

NoMethodError (undefined method `attributes' for #<Class:0x007fb1ed060a08>):
  app/models/purchaser.rb:13:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:55:41 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff2b73d0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1rjmc2o>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.3ms

RuntimeError ([["id", nil], ["name", nil], ["purchase_count", nil], ["created_at", nil], ["updated_at", nil]]):
  app/models/purchaser.rb:13:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 19:55:52 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6fe4b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1q2yuzm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.2ms

RuntimeError (["id", "name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:13:in `sanitize_attributes'
  app/models/purchaser.rb:8:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:04:10 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec930918 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1cq3p7j>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 14.9ms

RuntimeError (["id", "name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:11:in `sanitize_attributes'
  app/models/purchaser.rb:6:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:04:19 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff72ccd0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-u56jxt>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 10.6ms

RuntimeError (["id", "name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:11:in `sanitize_attributes'
  app/models/purchaser.rb:6:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:04:22 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec4ce7f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1veafmj>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.8ms

RuntimeError (["id", "name", "purchase_count", "created_at", "updated_at"]):
  app/models/purchaser.rb:11:in `sanitize_attributes'
  app/models/purchaser.rb:6:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:04:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec82c2b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1saq7wz>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.6ms

RuntimeError (["purchaser_name"]):
  app/models/purchaser.rb:12:in `block in sanitize_attributes'
  app/models/purchaser.rb:12:in `select'
  app/models/purchaser.rb:12:in `sanitize_attributes'
  app/models/purchaser.rb:6:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed07af20 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1cobspb>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00]]
  [1m[35m (20.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:04:57 UTC +00:00]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
  Rendered imports/create.html.erb within layouts/application (4.1ms)
Completed 200 OK in 116.4ms (Views: 45.3ms | ActiveRecord: 49.5ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Served asset /application.css - 304 Not Modified (9ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:04:57 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec491808 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-kwivnn>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00]]
  [1m[36m (18.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:26 UTC +00:00]]
  [1m[35m (7.4ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.6ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (4.2ms)
Completed 200 OK in 85.6ms (Views: 13.2ms | ActiveRecord: 47.5ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Served asset /application.css - 304 Not Modified (10ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:26 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec866c08 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-y2smi7>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00]]
  [1m[35m (23.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00]]
  [1m[36m (63.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00]]
  [1m[35m (7.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00], ["name", nil], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:05:28 UTC +00:00]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
  Rendered imports/create.html.erb within layouts/application (2.8ms)
Completed 200 OK in 126.0ms (Views: 9.3ms | ActiveRecord: 104.9ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Served asset /application.css - 304 Not Modified (3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:05:28 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:05:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ff19ecf0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-i35553>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.7ms

RuntimeError ({}):
  app/models/purchaser.rb:9:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:06:12 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec6486b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-zmgtjg>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.7ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name):
  app/models/purchaser.rb:9:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:06:26 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec80bf10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-54ncwb>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.3ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name):
  app/models/purchaser.rb:9:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:06:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ec8f01d8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-lhfzai>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.4ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name):
  app/models/purchaser.rb:9:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (11.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fb1ed1e00e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-6151-1qmj40a>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00], ["name", "Snake Plissken"], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00]]
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00], ["name", "Amy Pond"], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00], ["name", "Marty McFly"], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "purchase_count", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00], ["name", "Snake Plissken"], ["purchase_count", nil], ["updated_at", Fri, 06 Dec 2013 04:06:31 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.6ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (2.4ms)
Completed 200 OK in 104.8ms (Views: 10.3ms | ActiveRecord: 39.3ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:06:31 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)
Connecting to database specified by database.yml
  [1m[36m (15.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (48.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreatePurchasers (20131205205126)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (143.3ms)[0m  [1mCREATE TABLE "purchasers" ("id" serial primary key, "name" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205126')
  [1m[36m (61.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateMerchants (20131205205310)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (114.8ms)[0m  [1mCREATE TABLE "merchants" ("id" serial primary key, "name" character varying(255), "address" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205310')
  [1m[36m (15.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateItems (20131205205331)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (101.9ms)[0m  [1mCREATE TABLE "items" ("id" serial primary key, "description" character varying(255), "price" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205331')
  [1m[36m (17.0ms)[0m  [1mCOMMIT[0m
Migrating to CreatePurchases (20131205220255)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (32.9ms)[0m  [1mCREATE TABLE "purchases" ("id" serial primary key, "purchaser_id" integer, "item_id" integer, "qty" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205220255')
  [1m[36m (15.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:08:05 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f149481a6f0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7686-2c0lck>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00]]
  [1m[36m (19.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00]]
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:08:05 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36mPurchaser Load (1.2ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (4.9ms)
Completed 200 OK in 155.1ms (Views: 29.3ms | ActiveRecord: 56.9ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:08:06 -0800
Served asset /jquery.js - 304 Not Modified (11ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:08:06 -0800
Served asset /jquery_ujs.js - 304 Not Modified (4ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:08:06 -0800
Served asset /imports.css - 304 Not Modified (4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:08:06 -0800
Served asset /application.css - 304 Not Modified (8ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:08:06 -0800
Served asset /application.js - 304 Not Modified (12ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:08:06 -0800
Served asset /imports.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:13:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1494725f38 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7686-7sjwz4>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.5ms

NameError (uninitialized constant Purchaser::ImportFromDisorganizedHash):
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:13:55 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f14046d4f88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7753-1p9gk6e>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.4ms

NameError (uninitialized constant Purchaser::ImportFromDisorganizedHash):
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:14:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1404856618 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7753-1hv85uz>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.9ms

NameError (uninitialized constant Purchaser::ImportFromDisorganizedHash):
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:15:06 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c6e0c60 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-kp0ebj>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.3ms

ArgumentError (wrong number of arguments (0 for 1)):
  app/models/concerns/import_from_disorganized_hash.rb:3:in `included'
  app/models/concerns/import_from_disorganized_hash.rb:3:in `<module:ImportFromDisorganizedHash>'
  app/models/concerns/import_from_disorganized_hash.rb:1:in `<top (required)>'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:15:25 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c92d590 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1gcz81f>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 33.3ms

NameError (undefined local variable or method `base' for ImportFromDisorganizedHash:Module):
  app/models/concerns/import_from_disorganized_hash.rb:3:in `<module:ImportFromDisorganizedHash>'
  app/models/concerns/import_from_disorganized_hash.rb:1:in `<top (required)>'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:15:34 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c4973f0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1khszqm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.0ms

ArgumentError (wrong number of arguments (0 for 1)):
  app/models/concerns/import_from_disorganized_hash.rb:3:in `included'
  app/models/concerns/import_from_disorganized_hash.rb:3:in `<module:ImportFromDisorganizedHash>'
  app/models/concerns/import_from_disorganized_hash.rb:1:in `<top (required)>'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:03 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c83b178 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1b28z0u>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 29.7ms

NoMethodError (undefined method `import' for #<Class:0x007fc74c862458>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:09 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc75f7d6c10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-nzqrxr>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.2ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c7757c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-x3nd8a>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.0ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c8909e8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1b1nl8t>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 3.9ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74d1a3120 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1obwz8v>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.5ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:43 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc75fdd07b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-4imcyy>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.0ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:45 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c6f1628 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-10vv2zm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.4ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:16:57 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c8cac88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1osgcg0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.3ms

RuntimeError (Purchaser(id: integer, name: string, created_at: datetime, updated_at: datetime)):
  app/models/concerns/import_from_disorganized_hash.rb:4:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:17:15 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74d214028 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-7bcup2>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 39.1ms

NoMethodError (undefined method `santize_attributes' for #<Class:0x007fc74d261dc8>):
  app/models/concerns/import_from_disorganized_hash.rb:4:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:17:47 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c481758 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1nmanwq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.4ms

NoMethodError (undefined method `santize_attributes' for #<Class:0x007fc74c4b8410>):
  app/models/concerns/import_from_disorganized_hash.rb:4:in `extended'
  app/models/purchaser.rb:9:in `extend'
  app/models/purchaser.rb:9:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:17:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c78e9a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-42eodv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.5ms

NoMethodError (undefined method `santize_attributes' for #<Class:0x007fc74c798f18>):
  app/models/concerns/import_from_disorganized_hash.rb:4:in `extended'
  app/models/purchaser.rb:9:in `extend'
  app/models/purchaser.rb:9:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:18:02 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c947198 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-j43m9w>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.7ms

RuntimeError ([:_validators, :sanitize_attributes, :logger, :logger=, :configurations, :configurations=, :default_timezone, :default_timezone=, :schema_format, :schema_format=, :timestamped_migrations, :timestamped_migrations=, :inherited, :initialize_generated_modules, :generated_feature_methods, :inspect, :===, :arel_table, :arel_engine, :_attr_readonly?, :_attr_readonly=, :_attr_readonly, :primary_key_prefix_type, :primary_key_prefix_type=, :table_name_prefix?, :table_name_prefix=, :table_name_prefix, :table_name_suffix?, :table_name_suffix=, :table_name_suffix, :pluralize_table_names?, :pluralize_table_names=, :pluralize_table_names, :store_full_sti_class?, :store_full_sti_class=, :store_full_sti_class, :default_scopes?, :default_scopes=, :default_scopes, :_accessible_attributes?, :_accessible_attributes=, :_protected_attributes, :_protected_attributes?, :_protected_attributes=, :_active_authorizer?, :_active_authorizer=, :_mass_assignment_sanitizer?, :_mass_assignment_sanitizer=, :cache_timestamp_format?, :cache_timestamp_format=, :cache_timestamp_format, :_validate_callbacks?, :_validate_callbacks=, :_validate_callbacks, :_validators?, :_validators=, :lock_optimistically, :lock_optimistically=, :attribute_method_matchers?, :attribute_method_matchers=, :attribute_types_cached_by_default, :attribute_types_cached_by_default=, :time_zone_aware_attributes, :time_zone_aware_attributes=, :skip_time_zone_conversion_for_attributes?, :skip_time_zone_conversion_for_attributes=, :skip_time_zone_conversion_for_attributes, :partial_updates?, :partial_updates=, :partial_updates, :serialized_attributes?, :serialized_attributes=, :serialized_attributes, :attribute_method_matchers, :record_timestamps?, :record_timestamps=, :record_timestamps, :_validation_callbacks?, :_validation_callbacks=, :_validation_callbacks, :_initialize_callbacks?, :_initialize_callbacks=, :_initialize_callbacks, :after_initialize, :_find_callbacks?, :_find_callbacks=, :_find_callbacks, :after_find, :_touch_callbacks?, :_touch_callbacks=, :_touch_callbacks, :after_touch, :_save_callbacks?, :_save_callbacks=, :_save_callbacks, :before_save, :around_save, :after_save, :_create_callbacks?, :_create_callbacks=, :_create_callbacks, :before_create, :around_create, :after_create, :_update_callbacks?, :_update_callbacks=, :_update_callbacks, :before_update, :around_update, :after_update, :_destroy_callbacks?, :_destroy_callbacks=, :_destroy_callbacks, :before_destroy, :around_destroy, :after_destroy, :auto_explain_threshold_in_seconds?, :auto_explain_threshold_in_seconds=, :nested_attributes_options?, :nested_attributes_options=, :nested_attributes_options, :include_root_in_json?, :include_root_in_json=, :reflections?, :reflections=, :reflections, :_commit_callbacks?, :_commit_callbacks=, :_commit_callbacks, :_rollback_callbacks?, :_rollback_callbacks=, :_rollback_callbacks, :connection_handler?, :connection_handler=, :connection_handler, :establish_connection, :connection, :connection_id, :connection_id=, :connection_config, :connection_pool, :retrieve_connection, :connected?, :remove_connection, :clear_active_connections!, :clear_reloadable_connections!, :clear_all_connections!, :verify_active_connections!, :_accessible_attributes, :_active_authorizer, :_mass_assignment_sanitizer, :auto_explain_threshold_in_seconds, :postgresql_connection, :include_root_in_json, :composed_of, :transaction, :after_commit, :after_rollback, :create_reflection, :reflect_on_all_aggregations, :reflect_on_aggregation, :reflect_on_all_associations, :reflect_on_association, :reflect_on_all_autosave_associations, :store, :store_accessor, :accepts_nested_attributes_for, :logging_query_plan, :collecting_queries_for_explain, :exec_explain, :silence_auto_explain, :has_secure_password, :has_many, :has_one, :belongs_to, :has_and_belongs_to_many, :before_validation, :after_validation, :define_model_callbacks, :_define_before_model_callback, :_define_around_model_callback, :_define_after_model_callback, :observers=, :observers, :observer_instances, :instantiate_observers, :add_observer, :notify_observers, :count_observers, :instantiate_observer, :define_method__attribute, :serialize, :initialize_attributes, :define_method_attribute=, :define_method_attribute, :dangerous_attribute_method?, :primary_key, :quoted_primary_key, :reset_primary_key, :get_primary_key, :original_primary_key, :primary_key=, :set_primary_key, :cache_attributes, :cached_attributes, :cache_attribute?, :undefine_attribute_methods, :type_cast_attribute, :define_attribute_methods, :attribute_methods_generated?, :generated_external_attribute_methods, :instance_method_already_implemented?, :method_defined_within?, :attribute_method?, :attribute_names, :define_attr_method, :attribute_method_prefix, :attribute_method_suffix, :attribute_method_affix, :alias_attribute, :define_attribute_method, :generated_attribute_methods, :locking_enabled?, :locking_column=, :set_locking_column, :locking_column, :original_locking_column, :quoted_locking_column, :reset_locking_column, :update_counters, :reset_counters, :increment_counter, :decrement_counter, :create!, :validates_associated, :validates_uniqueness_of, :validates_acceptance_of, :validates_confirmation_of, :validates_exclusion_of, :validates_format_of, :validates_inclusion_of, :validates_length_of, :validates_size_of, :validates_numericality_of, :validates_presence_of, :validates_each, :validate, :validators, :validators_on, :validates, :validates!, :_validates_default_keys, :_parse_validates_options, :validates_with, :__define_runner, :__run_callback, :__reset_runner, :__callback_runner_name, :__update_callbacks, :set_callback, :skip_callback, :reset_callbacks, :define_callbacks, :_to_partial_path, :attr_protected, :attr_accessible, :protected_attributes, :accessible_attributes, :active_authorizers, :active_authorizer, :mass_assignment_sanitizer=, :quote_value, :sanitize, :sanitize_sql_for_conditions, :sanitize_sql, :sanitize_sql_for_assignment, :expand_hash_conditions_for_aggregates, :sanitize_sql_hash_for_conditions, :sanitize_sql_hash, :sanitize_sql_hash_for_assignment, :sanitize_sql_array, :sanitize_conditions, :replace_bind_variables, :replace_named_bind_variables, :expand_range_bind_variables, :quote_bound_value, :raise_if_bind_arity_mismatch, :respond_to?, :scoped, :scope_attributes, :scope_attributes?, :scope, :valid_scope_name?, :unscoped, :before_remove_const, :default_scope, :build_default_scope, :ignore_default_scope?, :ignore_default_scope=, :evaluate_default_scope, :with_scope, :with_exclusive_scope, :current_scope, :current_scope=, :descends_from_active_record?, :finder_needs_type_condition?, :symbolized_base_class, :symbolized_sti_name, :base_class, :abstract_class, :abstract_class=, :abstract_class?, :sti_name, :instantiate, :class_of_active_record_descendant, :compute_type, :lookup_ancestors, :i18n_scope, :human_attribute_name, :table_name, :original_table_name, :table_name=, :set_table_name, :quoted_table_name, :reset_table_name, :full_table_name_prefix, :inheritance_column, :original_inheritance_column, :inheritance_column=, :set_inheritance_column, :sequence_name, :original_sequence_name, :reset_sequence_name, :sequence_name=, :set_sequence_name, :table_exists?, :columns, :columns_hash, :column_defaults, :column_names, :content_columns, :column_methods_hash, :reset_column_information, :clear_cache!, :attr_readonly, :readonly_attributes, :find, :first, :first!, :last, :last!, :all, :exists?, :any?, :many?, :first_or_create, :first_or_create!, :first_or_initialize, :destroy, :destroy_all, :delete, :delete_all, :update, :update_all, :find_each, :find_in_batches, :select, :group, :order, :except, :reorder, :limit, :offset, :joins, :where, :preload, :eager_load, :includes, :from, :lock, :readonly, :having, :create_with, :uniq, :count, :average, :minimum, :maximum, :sum, :calculate, :pluck, :find_by_sql, :count_by_sql, :direct_descendants, :descendants, :benchmark, :silence, :cache, :uncached, :model_name, :create, :yaml_tag, :allocate, :new, :superclass, :class_attribute, :cattr_reader, :cattr_writer, :cattr_accessor, :superclass_delegating_accessor, :subclasses, :json_creatable?, :duplicable?, :stubba_method, :any_instance, :freeze, :==, :<=>, :<, :<=, :>, :>=, :to_s, :included_modules, :include?, :name, :ancestors, :instance_methods, :public_instance_methods, :protected_instance_methods, :private_instance_methods, :constants, :const_get, :const_set, :const_defined?, :class_variables, :remove_class_variable, :class_variable_get, :class_variable_set, :class_variable_defined?, :public_constant, :private_constant, :module_exec, :class_exec, :module_eval, :class_eval, :method_defined?, :public_method_defined?, :private_method_defined?, :protected_method_defined?, :public_class_method, :private_class_method, :autoload, :autoload?, :instance_method, :public_instance_method, :psych_yaml_as, :yaml_as, :deprecate, :alias_method_chain, :remove_possible_method, :redefine_method, :mattr_reader, :mattr_writer, :mattr_accessor, :parent_name, :parent, :parents, :local_constants, :local_constant_names, :delegate, :instance_method_names, :method_names, :attr_internal_reader, :attr_internal_writer, :attr_internal_accessor, :attr_internal, :anonymous?, :reachable?, :pretty_print_cycle, :pretty_print, :qualified_const_defined?, :qualified_const_get, :qualified_const_set, :synchronize, :synchronize_with_deprecation, :synchronize_without_deprecation, :const_missing, :unloadable, :in?, :psych_to_yaml, :to_yaml, :to_yaml_properties, :blank?, :present?, :presence, :acts_like?, :try, :html_safe?, :pry, :__binding__, :__is_a__, :to_param, :to_query, :`, :instance_values, :instance_variable_names, :to_json, :with_options, :as_json, :require_or_load, :require_dependency, :require_association, :load_dependency, :load, :require, :__metaclass__, :to_matcher, :mocha_inspect, :_method, :mocha, :reset_mocha, :stubba_object, :expects, :stubs, :unstub, :method_exists?, :pretty_print_instance_variables, :pretty_print_inspect, :nil?, :=~, :!~, :eql?, :hash, :class, :singleton_class, :clone, :dup, :taint, :tainted?, :untaint, :untrust, :untrusted?, :trust, :frozen?, :methods, :singleton_methods, :protected_methods, :private_methods, :public_methods, :instance_variables, :instance_variable_get, :instance_variable_set, :instance_variable_defined?, :remove_instance_variable, :instance_of?, :kind_of?, :is_a?, :tap, :send, :public_send, :extend, :display, :method, :public_method, :define_singleton_method, :object_id, :to_enum, :enum_for, :gem, :silence_warnings, :enable_warnings, :with_warnings, :silence_stderr, :silence_stream, :suppress, :capture, :quietly, :pretty_inspect, :debugger, :breakpoint, :suppress_warnings, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__, :__id__]):
  app/models/concerns/import_from_disorganized_hash.rb:4:in `extended'
  app/models/purchaser.rb:9:in `extend'
  app/models/purchaser.rb:9:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:18:34 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc75ec080c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1dodqy5>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 9.4ms

NoMethodError (undefined method `import' for #<Class:0x007fc75ed716f8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:19:06 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c435f10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1s1wj8b>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.9ms

NoMethodError (undefined method `import' for #<Class:0x007fc75ed716f8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:19:08 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c6f1858 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-s7kv4n>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.2ms

NoMethodError (undefined method `import' for #<Class:0x007fc75ed716f8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:19:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c8a02d0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-9ah5x0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.9ms

NoMethodError (undefined method `import' for #<Class:0x007fc74c8c55a8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:19:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74d1fabc8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-5t99nt>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 42.2ms

NoMethodError (undefined method `import' for #<Class:0x007fc74d20cfa8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:19:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc75f6b6718 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-r1eom>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.1ms

NoMethodError (undefined method `import' for #<Class:0x007fc74d20cfa8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:20:10 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c6d4758 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-10gbp3k>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 10.3ms

NoMethodError (undefined method `import' for #<Class:0x007fc74c703dc8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:20:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c82d730 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-1bbjb48>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.6ms

NoMethodError (undefined method `import' for #<Class:0x007fc74c703dc8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:20:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74c90b8f0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-3r4ph5>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.4ms

NoMethodError (undefined method `import' for #<Class:0x007fc74c703dc8>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (10.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:20:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc74d204218 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-is1op>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 7.7ms

NoMethodError (undefined method `import' for #<Class:0x007fc74d226e30>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:20:51 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fc75f3dcc40 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7769-ipggdk>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.4ms

NoMethodError (undefined method `import' for #<Class:0x007fc74d226e30>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:20:57 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb586e0da0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1feck25>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 29.0ms

NoMethodError (undefined method `import' for #<Class:0x007fbb5872b058>):
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:21:10 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c6f8310 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-pu8nv4>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 4.3ms

RuntimeError (Must implement self.sanitize_attribues(hash) to use this mixin!):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `extended'
  app/models/purchaser.rb:2:in `extend'
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:22:21 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb587a8c60 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-6wb3me>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.4ms

ArgumentError (wrong number of arguments (1 for 2)):
  app/models/concerns/import_from_disorganized_hash.rb:3:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:22:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5897a908 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1bhd7dh>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 9.4ms

NoMethodError (undefined method `sanitize_attributes' for #<Class:0x007fbb589911a8>):
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  app/controllers/imports_controller.rb:11:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (33.0ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c59b990 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-127i61f>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (8.1ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00]]
  [1m[36m (19.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00]]
  [1m[35m (8.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00]]
  [1m[36m (8.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:23:08 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36mPurchaser Load (1.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (4.0ms)
Completed 200 OK in 102.7ms (Views: 21.5ms | ActiveRecord: 59.3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Served asset /jquery_ujs.js - 304 Not Modified (6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Served asset /application.css - 304 Not Modified (6ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Served asset /imports.css - 304 Not Modified (3ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Served asset /jquery.js - 304 Not Modified (8ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Served asset /imports.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:23:08 -0800
Served asset /application.js - 304 Not Modified (7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:23:46 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6aae1d70 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-qlkdmw>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:23:46 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:23:46 UTC +00:00]]
  [1m[35m (22.6ms)[0m  COMMIT
Completed 500 Internal Server Error in 47.4ms

NoMethodError (undefined method `import' for #<Class:0x007fbb6c4afdd8>):
  app/controllers/imports_controller.rb:12:in `block in create'
  app/controllers/imports_controller.rb:10:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:25:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb584ffab8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1kkgt6o>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00]]
  [1m[36m (23.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00]]
  [1m[35m (11.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00]]
  [1m[36m (4.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:25:30 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:25:31 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:25:31 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:25:31 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:25:31 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:25:31 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:25:31 UTC +00:00]]
  [1m[35m (7.3ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.6ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  [1m[35mItem Load (0.7ms)[0m  SELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT 1
  Rendered imports/create.html.erb within layouts/application (4.6ms)
Completed 200 OK in 154.8ms (Views: 11.4ms | ActiveRecord: 90.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:25:31 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:25:31 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:25:31 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:25:31 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:25:31 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:25:31 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6ad75c30 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-ka3fet>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[36m (26.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[35m (4.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[36m (8.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:27:16 UTC +00:00]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT 1
  [1m[36mMerchant Load (0.7ms)[0m  [1mSELECT "merchants".* FROM "merchants" ORDER BY "merchants"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (13.4ms)
Completed 200 OK in 238.9ms (Views: 25.0ms | ActiveRecord: 124.3ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Served asset /application.css - 304 Not Modified (7ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:27:16 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5894b680 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-clnifr>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (20.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (17.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (9.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:32:26 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" ORDER BY "merchants"."id" DESC LIMIT 1
  [1m[36mPurchase Load (0.3ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (12.2ms)
Completed 200 OK in 334.8ms (Views: 17.9ms | ActiveRecord: 165.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Served asset /application.css - 304 Not Modified (9ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:32:26 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb588dce88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-xxtbg0>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (13.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (32.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (4.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (8.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (8.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 04:33:40 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" ORDER BY "merchants"."id" DESC LIMIT 1
  [1m[36mPurchase Load (0.7ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (15.5ms)
Completed 200 OK in 341.6ms (Views: 21.7ms | ActiveRecord: 187.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:40 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58813f60 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-18s6g9m>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (17.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (10.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (4.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (12.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (17.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[35m (9.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:33:55 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
  [1m[36mItem Load (0.9ms)[0m  [1mSELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" ORDER BY "merchants"."id" DESC LIMIT 1
  [1m[36mPurchase Load (0.6ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (43.7ms)
Completed 200 OK in 354.4ms (Views: 49.3ms | ActiveRecord: 168.3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Served asset /imports.css - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:33:55 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:47:25 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb586ca2f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-px56hx>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00]]
  [1m[35m (16.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00]]
  [1m[35m (7.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:47:25 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 173.2ms

ActiveRecord::AssociationTypeMismatch (Purchaser(#70221309611720) expected, got ActiveRecord::Relation(#70221309967540)):
  app/models/purchase.rb:12:in `map_child_data'
  app/controllers/imports_controller.rb:17:in `block in create'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (33.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:47:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c5bce38 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1d71tvn>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00]]
  [1m[35m (15.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00]]
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00]]
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:47:56 UTC +00:00]]
  [1m[36m (42.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."purchase_id" = 14 LIMIT 1[0m
PG::UndefinedColumn: ERROR:  column purchasers.purchase_id does not exist
LINE 1: SELECT  "purchasers".* FROM "purchasers"  WHERE "purchasers"...
                                                        ^
: SELECT  "purchasers".* FROM "purchasers"  WHERE "purchasers"."purchase_id" = 14 LIMIT 1
Completed 500 Internal Server Error in 218.7ms

ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column purchasers.purchase_id does not exist
LINE 1: SELECT  "purchasers".* FROM "purchasers"  WHERE "purchasers"...
                                                        ^
: SELECT  "purchasers".* FROM "purchasers"  WHERE "purchasers"."purchase_id" = 14 LIMIT 1):
  app/models/purchase.rb:12:in `map_child_data'
  app/controllers/imports_controller.rb:17:in `block in create'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb59127b88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1s4zyf>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (24.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (3.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.8ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:48:34.487345' WHERE "purchases"."id" = 15
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:48:34.559425' WHERE "purchases"."id" = 16
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:48:34.622530' WHERE "purchases"."id" = 17
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:48:34 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:48:34.688487' WHERE "purchases"."id" = 18
  [1m[36m (11.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" ORDER BY "purchasers"."id" DESC LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" ORDER BY "items"."id" DESC LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" ORDER BY "merchants"."id" DESC LIMIT 1
  [1m[36mPurchase Load (0.7ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  Rendered imports/create.html.erb within layouts/application (13.8ms)
Completed 200 OK in 428.3ms (Views: 23.3ms | ActiveRecord: 204.0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Served asset /jquery.js - 304 Not Modified (5ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:48:34 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:49:32 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb4c0a63b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1nb1yih>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[35m (16.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[35m (9.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:49:32.822185' WHERE "purchases"."id" = 19
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[35m (8.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:49:32.882337' WHERE "purchases"."id" = 20
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:49:32 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:49:32.950236' WHERE "purchases"."id" = 21
  [1m[36m (77.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00]]
  [1m[35m (41.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00]]
  [1m[36m (40.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00]]
  [1m[35m (61.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:49:33 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:49:33.200305' WHERE "purchases"."id" = 22
  [1m[36m (4.3ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.4ms)
Completed 200 OK in 574.7ms (Views: 16.3ms | ActiveRecord: 379.4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:49:33 -0800
Served asset /application.css - 304 Not Modified (5ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:49:33 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:49:33 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:49:33 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:49:33 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:49:33 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:52:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb590fc960 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-16444jj>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:52:27 UTC +00:00]]
  [1m[35m (25.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:52:27 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:52:27 UTC +00:00]]
  [1m[36m (9.7ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 112.8ms

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:21: syntax error, unexpected end-of-input, expecting keyword_end):
  app/controllers/imports_controller.rb:14:in `block in create'
  app/controllers/imports_controller.rb:9:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:52:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb586caa00 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1ycfu8v>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:36 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:52:36 UTC +00:00]]
  [1m[35m (18.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:52:36 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:52:36 UTC +00:00]]
  [1m[36m (13.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:36 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:52:36 UTC +00:00]]
  [1m[35m (142.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (17.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:52:37.190948' WHERE "purchases"."id" = 23
  [1m[36m (12.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (86.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:52:37.334907' WHERE "purchases"."id" = 24
  [1m[36m (37.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[35m (41.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (67.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[35m (25.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:52:37.537325' WHERE "purchases"."id" = 25
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:52:37 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:52:37.605016' WHERE "purchases"."id" = 26
  [1m[36m (9.5ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (25.0ms)
Completed 500 Internal Server Error in 763.5ms

ActionView::Template::Error (undefined method `reduce' for nil:NilClass):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (32.0ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:53:40 -0800

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:19: syntax error, unexpected tIDENTIFIER, expecting keyword_end):
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.16) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.16) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.16) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:608:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.16) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.16) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `_run__4005999132485003628__call__3375599453589479610__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:53:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58629d58 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1x3v0qg>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (17.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (8.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:53:58.849743' WHERE "purchases"."id" = 27
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:53:58.910829' WHERE "purchases"."id" = 28
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:53:58.974493' WHERE "purchases"."id" = 29
  [1m[36m (3.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:53:58 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:53:59 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:53:59 UTC +00:00]]
  [1m[35m (8.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:53:59 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:53:59 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:53:59.031513' WHERE "purchases"."id" = 30
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.0ms)
Completed 500 Internal Server Error in 348.2ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:54:23 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c1c7148 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-hwugj>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (24.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (3.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (9.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:54:23.732804' WHERE "purchases"."id" = 31
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (8.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (8.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:54:23.794755' WHERE "purchases"."id" = 32
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:54:23.860771' WHERE "purchases"."id" = 33
  [1m[36m (13.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[35m (8.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:54:23 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:54:23.928581' WHERE "purchases"."id" = 34
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (2.3ms)
Completed 500 Internal Server Error in 359.1ms

ActionView::Template::Error ([#<Purchase id: 31, purchaser_id: 1, item_id: 1, qty: 2, created_at: "2013-12-06 04:54:23", updated_at: "2013-12-06 04:54:23">, #<Purchase id: 32, purchaser_id: 2, item_id: 2, qty: 5, created_at: "2013-12-06 04:54:23", updated_at: "2013-12-06 04:54:23">, #<Purchase id: 33, purchaser_id: 3, item_id: 3, qty: 1, created_at: "2013-12-06 04:54:23", updated_at: "2013-12-06 04:54:23">, #<Purchase id: 34, purchaser_id: 1, item_id: 3, qty: 4, created_at: "2013-12-06 04:54:23", updated_at: "2013-12-06 04:54:23">]):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:54:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58c04de0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-mkmqey>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (17.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:54:38.213737' WHERE "purchases"."id" = 35
  [1m[36m (5.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:54:38.275297' WHERE "purchases"."id" = 36
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:54:38.341689' WHERE "purchases"."id" = 37
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:54:38 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:54:38.410270' WHERE "purchases"."id" = 38
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (2.2ms)
Completed 500 Internal Server Error in 419.5ms

ActionView::Template::Error (undefined method `item' for #<Array:0x007fbb58f35fc8>):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:54:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb590c29e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-9602am>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (17.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (3.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (4.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (9.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:54:49.436765' WHERE "purchases"."id" = 39
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:54:49.500822' WHERE "purchases"."id" = 40
  [1m[36m (10.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:54:49.565530' WHERE "purchases"."id" = 41
  [1m[36m (12.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:54:49 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:54:49.633015' WHERE "purchases"."id" = 42
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (2.2ms)
Completed 500 Internal Server Error in 399.0ms

ActionView::Template::Error (undefined method `item' for #<Array:0x007fbb590cb928>):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:55:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5889d9e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-h6igwv>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (21.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (12.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:55:16.492915' WHERE "purchases"."id" = 43
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (7.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (7.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:55:16.554040' WHERE "purchases"."id" = 44
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:55:16.620611' WHERE "purchases"."id" = 45
  [1m[36m (11.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:55:16 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:55:16.686237' WHERE "purchases"."id" = 46
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (2.0ms)
Completed 500 Internal Server Error in 409.5ms

ActionView::Template::Error ([#<Purchase id: 43, purchaser_id: 1, item_id: 1, qty: 2, created_at: "2013-12-06 04:55:16", updated_at: "2013-12-06 04:55:16">, #<Purchase id: 44, purchaser_id: 2, item_id: 2, qty: 5, created_at: "2013-12-06 04:55:16", updated_at: "2013-12-06 04:55:16">, #<Purchase id: 45, purchaser_id: 3, item_id: 3, qty: 1, created_at: "2013-12-06 04:55:16", updated_at: "2013-12-06 04:55:16">, #<Purchase id: 46, purchaser_id: 1, item_id: 3, qty: 4, created_at: "2013-12-06 04:55:16", updated_at: "2013-12-06 04:55:16">]):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:55:40 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5878f990 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-vhbovi>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:40 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:55:40 UTC +00:00]]
  [1m[35m (20.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:40 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:55:40 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (70.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (29.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:55:41.147534' WHERE "purchases"."id" = 47
  [1m[36m (48.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:55:41.250486' WHERE "purchases"."id" = 48
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:55:41.317096' WHERE "purchases"."id" = 49
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:55:41 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:55:41.383161' WHERE "purchases"."id" = 50
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 502.3ms

ActionView::Template::Error (exception class/object expected):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `raise'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:55:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c4b5170 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-dyhxzc>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (41.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (23.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (1.0ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:55:49.571704' WHERE "purchases"."id" = 51
  [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:55:49.631508' WHERE "purchases"."id" = 52
  [1m[36m (10.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (1.0ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:55:49.697958' WHERE "purchases"."id" = 53
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:55:49 UTC +00:00]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:55:49.762713' WHERE "purchases"."id" = 54
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (3.0ms)
Completed 500 Internal Server Error in 416.3ms

ActionView::Template::Error ([#<Item id: 1, description: "$10 off $20 of food", price: "10.0", created_at: "2013-12-06 04:25:30", updated_at: "2013-12-06 04:25:30">, #<Item id: 2, description: "$30 of awesome for $10", price: "10.0", created_at: "2013-12-06 04:25:30", updated_at: "2013-12-06 04:25:30">, #<Item id: 3, description: "$20 Sneakers for $5", price: "5.0", created_at: "2013-12-06 04:25:31", updated_at: "2013-12-06 04:25:31">, #<Item id: 3, description: "$20 Sneakers for $5", price: "5.0", created_at: "2013-12-06 04:25:31", updated_at: "2013-12-06 04:25:31">]):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:56:12 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58fadc80 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-za0byi>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:12 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:56:12 UTC +00:00]]
  [1m[35m (37.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:56:12 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:56:12 UTC +00:00]]
  [1m[36m (41.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (28.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:56:13.088623' WHERE "purchases"."id" = 55
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:56:13.155311' WHERE "purchases"."id" = 56
  [1m[36m (10.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.8ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:56:13.221839' WHERE "purchases"."id" = 57
  [1m[36m (10.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:56:13 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:56:13.287235' WHERE "purchases"."id" = 58
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.9ms)
Completed 500 Internal Server Error in 464.2ms

ActionView::Template::Error (["10.0", "10.0", "5.0", "5.0"]):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:56:39 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb59102608 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1vzxoae>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (19.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (4.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (9.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:56:39.680052' WHERE "purchases"."id" = 59
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:56:39.744163' WHERE "purchases"."id" = 60
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.9ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:56:39.810570' WHERE "purchases"."id" = 61
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:56:39 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:56:39.876706' WHERE "purchases"."id" = 62
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.6ms)
Completed 500 Internal Server Error in 396.4ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:57:05 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58901850 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1n7ubxt>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00]]
  [1m[35m (19.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00]]
  [1m[35m (2.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:57:05.882165' WHERE "purchases"."id" = 63
  [1m[36m (75.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:57:05 UTC +00:00]]
  [1m[35m (39.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[36m (41.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[35m (62.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:57:06.133755' WHERE "purchases"."id" = 64
  [1m[36m (12.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:57:06.200732' WHERE "purchases"."id" = 65
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:06 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:57:06.267077' WHERE "purchases"."id" = 66
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.7ms)
Completed 500 Internal Server Error in 587.7ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:57:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb587d0710 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-dknz4w>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (23.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:57:33.739126' WHERE "purchases"."id" = 67
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:57:33.806872' WHERE "purchases"."id" = 68
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:57:33.862175' WHERE "purchases"."id" = 69
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:33 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:57:33.919902' WHERE "purchases"."id" = 70
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.3ms)
Completed 500 Internal Server Error in 356.7ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:57:54 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c63dda8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-p38jz2>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (16.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (7.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (12.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (12.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:57:55.159366' WHERE "purchases"."id" = 71
  [1m[36m (3.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (1.0ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:57:55.221652' WHERE "purchases"."id" = 72
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:57:55.286390' WHERE "purchases"."id" = 73
  [1m[36m (10.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:55 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:57:55.352418' WHERE "purchases"."id" = 74
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.9ms)
Completed 500 Internal Server Error in 375.5ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:57:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb59037d18 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1xzwzfo>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (19.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:57:58.474769' WHERE "purchases"."id" = 75
  [1m[36m (10.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (8.1ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:57:58.540596' WHERE "purchases"."id" = 76
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:57:58.602380' WHERE "purchases"."id" = 77
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:57:58 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:57:58.699935' WHERE "purchases"."id" = 78
  [1m[36m (7.2ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.1ms)
Completed 500 Internal Server Error in 304.6ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:58:08 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb584c0908 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-b3kagn>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (14.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (13.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:58:08.641965' WHERE "purchases"."id" = 79
  [1m[36m (4.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:58:08.706727' WHERE "purchases"."id" = 80
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:58:08.768519' WHERE "purchases"."id" = 81
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (83.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (40.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[35m (40.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:58:08 UTC +00:00]]
  [1m[36m (62.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:58:09.030390' WHERE "purchases"."id" = 82
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (0.7ms)
Completed 500 Internal Server Error in 545.6ms

ActionView::Template::Error (10.0):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `map'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:58:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6ba99a88 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-jujgv>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (21.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (2.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (4.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:58:21.123446' WHERE "purchases"."id" = 83
  [1m[36m (10.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:58:21.184852' WHERE "purchases"."id" = 84
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:58:21.244067' WHERE "purchases"."id" = 85
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:58:21 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:58:21.310372' WHERE "purchases"."id" = 86
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.4ms)
Completed 500 Internal Server Error in 349.8ms

ActionView::Template::Error (undefined method `item' for :+:Symbol):
    1: total gross: <%= Purchase.gross(@purchases) %>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `each'
  app/models/purchase.rb:20:in `reduce'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221314654000'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:59:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5907ef10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-mr85ep>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[35m (35.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[36m (25.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[35m (22.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[36m (49.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:59:04.873232' WHERE "purchases"."id" = 87
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:59:04.935303' WHERE "purchases"."id" = 88
  [1m[36m (13.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:59:04 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:59:05.002232' WHERE "purchases"."id" = 89
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00]]
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00]]
  [1m[35m (8.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:59:05 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:59:05.070416' WHERE "purchases"."id" = 90
  [1m[36m (10.4ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (0.4ms)
Completed 200 OK in 484.4ms (Views: 8.3ms | ActiveRecord: 295.6ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:05 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:05 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:59:05 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:59:05 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:05 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:05 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb590c3ed0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-15thyet>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (27.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (9.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (13.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:59:21.409417' WHERE "purchases"."id" = 91
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:59:21.476008' WHERE "purchases"."id" = 92
  [1m[36m (9.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:59:21.541103' WHERE "purchases"."id" = 93
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:59:21 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:59:21.608261' WHERE "purchases"."id" = 94
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (0.5ms)
Completed 200 OK in 432.1ms (Views: 14.6ms | ActiveRecord: 221.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:21 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 20:59:56 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb588b1788 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1g70car>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[35m (44.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[36m (18.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 04:59:56.710548' WHERE "purchases"."id" = 95
  [1m[36m (9.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[36m (84.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[35m (41.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[36m (40.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 04:59:56.916521' WHERE "purchases"."id" = 96
  [1m[36m (60.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:59:56 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 04:59:57.030733' WHERE "purchases"."id" = 97
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 04:59:57 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 04:59:57.096798' WHERE "purchases"."id" = 98
  [1m[36m (25.8ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (70.1ms)
Completed 200 OK in 594.9ms (Views: 78.1ms | ActiveRecord: 434.3ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 20:59:57 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 20:59:57 -0800
Served asset /imports.css - 304 Not Modified (38ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:57 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:57 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:57 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 20:59:57 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:03:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6bfbaa30 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-ind3fd>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[35m (27.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (8.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:03:31.894532' WHERE "purchases"."id" = 99
  [1m[36m (11.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:03:31.962198' WHERE "purchases"."id" = 100
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:03:31 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00]]
  [1m[35m (4.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00]]
  [1m[36m (8.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:03:32.027457' WHERE "purchases"."id" = 101
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00]]
  [1m[35m (9.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00]]
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:03:32 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:03:32.093766' WHERE "purchases"."id" = 102
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (2.7ms)
Completed 200 OK in 315.6ms (Views: 16.0ms | ActiveRecord: 210.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:03:32 -0800
Served asset /application.css - 304 Not Modified (3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:03:32 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:03:32 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:03:32 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:03:32 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:03:32 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58838590 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-a8k1b2>>, "commit"=>"import!"}
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (17.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (8.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:04:38.424196' WHERE "purchases"."id" = 103
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:04:38.490027' WHERE "purchases"."id" = 104
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (7.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:04:38.558864' WHERE "purchases"."id" = 105
  [1m[36m (9.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:04:38 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:04:38.623431' WHERE "purchases"."id" = 106
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (2.2ms)
Completed 200 OK in 294.3ms (Views: 14.8ms | ActiveRecord: 194.8ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Served asset /jquery.js - 304 Not Modified (5ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:04:38 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:06:35 -0800

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/controllers/imports_controller.rb:28: syntax error, unexpected end-of-input, expecting keyword_end):
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.16) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.16) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.16) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.16) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.16) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.16) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.16) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.16) lib/action_dispatch/routing/route_set.rb:608:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.16) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.16) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `_run__4005999132485003628__call__3375599453589479610__callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.16) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.16) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.16) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.16) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.16) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.16) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.16) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.16) lib/action_dispatch/middleware/static.rb:63:in `call'
  railties (3.2.16) lib/rails/engine.rb:484:in `call'
  railties (3.2.16) lib/rails/application.rb:231:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.16) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
  /home/dreamr/.rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:06:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb6c5b1218 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1c8ebjg>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:44 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:06:44 UTC +00:00]]
  [1m[35m (19.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:06:44 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:06:44 UTC +00:00]]
  [1m[36m (9.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.8ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:06:45.070032' WHERE "purchases"."id" = 107
  [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (8.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:06:45.123972' WHERE "purchases"."id" = 108
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:06:45.184503' WHERE "purchases"."id" = 109
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:06:45 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:06:45.250665' WHERE "purchases"."id" = 110
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.5ms)
Completed 500 Internal Server Error in 351.3ms

ActionView::Template::Error (undefined method `item' for #<CSV::Row:0x007fbb6c5e6990>):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221311019240'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (9.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:07:20 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58f3d930 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-18v1f39>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (11.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (5.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (13.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (13.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (11.8ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:07:20.810442' WHERE "purchases"."id" = 111
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:07:20.872689' WHERE "purchases"."id" = 112
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (7.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (7.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:07:20.938818' WHERE "purchases"."id" = 113
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (9.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:07:20 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:07:21.005673' WHERE "purchases"."id" = 114
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (0.8ms)
Completed 500 Internal Server Error in 409.7ms

ActionView::Template::Error (undefined method `item' for #<CSV::Row:0x007fbb58fa85c8>):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221311019240'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb59117df0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1r5bu6h>>, "commit"=>"import!"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (22.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (9.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (11.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:07:28.725035' WHERE "purchases"."id" = 115
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:07:28.788951' WHERE "purchases"."id" = 116
  [1m[36m (10.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (7.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (8.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:07:28.854341' WHERE "purchases"."id" = 117
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:07:28 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:07:28.920411' WHERE "purchases"."id" = 118
  [1m[36m (11.9ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.3ms)
Completed 200 OK in 414.2ms (Views: 11.6ms | ActiveRecord: 207.9ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:07:28 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:10:29 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58937b58 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1e9xdpv>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.3ms

NameError (uninitialized constant ImportsController::PurchasesFromTabFilei):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:10:40 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb59053f18 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-k6l6v8>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 35.1ms

NoMethodError (undefined method `call' for PurchasesFromTabFile:Module):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:10:48 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb584489a8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1fdeh2p>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.4ms

NoMethodError (undefined method `underscore_keys' for PurchasesFromTabFile:Module):
  lib/purchases_from_tab_file.rb:6:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:10:57 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5880f5a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-48a4ss>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.4ms

NoMethodError (undefined method `underscore_keys' for PurchasesFromTabFile:Module):
  lib/purchases_from_tab_file.rb:6:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:10:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58908948 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-vvppso>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 0.8ms

NoMethodError (undefined method `underscore_keys' for PurchasesFromTabFile:Module):
  lib/purchases_from_tab_file.rb:6:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb5907f848 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1i6zruj>>, "commit"=>"import!"}
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (58.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (24.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (8.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (6.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:11:09.429171' WHERE "purchases"."id" = 119
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:11:09.497035' WHERE "purchases"."id" = 120
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:11:09.563293' WHERE "purchases"."id" = 121
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:11:09 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:11:09.629804' WHERE "purchases"."id" = 122
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (0.8ms)
Completed 200 OK in 455.6ms (Views: 9.7ms | ActiveRecord: 265.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Served asset /application.css - 304 Not Modified (8ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:09 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:11:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb590e1d90 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1qnqhco>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:30 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:11:30 UTC +00:00]]
  [1m[35m (78.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (37.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (9.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:11:31.244443' WHERE "purchases"."id" = 123
  [1m[36m (4.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (1.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:11:31.305530' WHERE "purchases"."id" = 124
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:11:31.371026' WHERE "purchases"."id" = 125
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[35m (4.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:11:31 UTC +00:00]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:11:31.436676' WHERE "purchases"."id" = 126
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.4ms)
Completed 200 OK in 488.5ms (Views: 13.4ms | ActiveRecord: 283.4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:11:31 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:31 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:31 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:31 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:11:31 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:11:31 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:12:37 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb59093f50 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-wbipdd>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (17.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:12:37.601089' WHERE "purchases"."id" = 127
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:12:37.667980' WHERE "purchases"."id" = 128
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:12:37.733556' WHERE "purchases"."id" = 129
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:12:37 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.7ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:12:37.800839' WHERE "purchases"."id" = 130
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.5ms)
Completed 500 Internal Server Error in 414.8ms

ActionView::Template::Error (undefined method `item' for #<CSV::Row:0x007fbb590c1b80>):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:20:in `block in gross'
  app/models/purchase.rb:20:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb__2850682940086918491_70221311019240'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (9.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:13:44 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58922fc8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1v7hkg1>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.1ms

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/lib/purchases_from_tab_file.rb:13: syntax error, unexpected keyword_end, expecting ')'
/home/dreamr/dev/challenges/data-engineering/migration_app/lib/purchases_from_tab_file.rb:20: syntax error, unexpected end-of-input, expecting keyword_end):
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb58f2a2e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-157uqxj>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (18.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (3.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (12.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:13:53.430483' WHERE "purchases"."id" = 131
  [1m[36m (10.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (8.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (8.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:13:53.495147' WHERE "purchases"."id" = 132
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (8.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:13:53.562297' WHERE "purchases"."id" = 133
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:13:53 UTC +00:00]]
  [1m[36m (72.8ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:13:53.694655' WHERE "purchases"."id" = 134
  [1m[36m (45.1ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.0ms)
Completed 200 OK in 507.2ms (Views: 9.1ms | ActiveRecord: 309.3ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:13:53 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AsOhC7dXJPjpeLWnl3dYXv7EZu0bHQ4TxeAVrTk6+0A=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007fbb590c8548 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-7858-1kailsf>>, "commit"=>"import!"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (21.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (9.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 2], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (9.6ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 05:14:27.255394' WHERE "purchases"."id" = 135
  [1m[36m (13.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 5], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 05:14:27.325398' WHERE "purchases"."id" = 136
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 1], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 05:14:27.391031' WHERE "purchases"."id" = 137
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", 4], ["updated_at", Fri, 06 Dec 2013 05:14:27 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 05:14:27.457374' WHERE "purchases"."id" = 138
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
  Rendered imports/create.html.erb within layouts/application (1.2ms)
Completed 200 OK in 425.7ms (Views: 10.6ms | ActiveRecord: 210.6ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Served asset /imports.css - 304 Not Modified (2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 21:14:27 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Connecting to database specified by database.yml
Processing by ImportsController#new as HTML
  Rendered imports/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 50.1ms (Views: 49.7ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Served asset /application.css - 304 Not Modified (10ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Served asset /jquery_ujs.js - 304 Not Modified (3ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Served asset /jquery.js - 304 Not Modified (4ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Served asset /imports.css - 304 Not Modified (3ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Served asset /application.js - 304 Not Modified (38ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:09:58 -0800
Served asset /imports.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:10:02 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a1fcaf298 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1xhpz8y>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.3ms

ArgumentError (wrong number of arguments (1 for 2)):
  app/models/concerns/import_from_disorganized_hash.rb:3:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:10:42 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0ca28910 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-mqgpqm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.3ms

NoMethodError (undefined method `split' for :purchaser_name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:12:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `select'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:10:54 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4440920 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-slxu22>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 61.3ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name, item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c9653c0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-hixh61>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (37.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36mPurchaser Load (1.5ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.8ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1
  [1m[36mMerchant Load (0.8ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Bob''s Pizza') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 06:11:59.322746' WHERE "purchases"."id" = 139[0m
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (7.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.6ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Tom''s Awesome Shop') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 06:11:59.388275' WHERE "purchases"."id" = 140[0m
  [1m[35m (2.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (8.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (9.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.8ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 06:11:59.445492' WHERE "purchases"."id" = 141[0m
  [1m[35m (10.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:11:59 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.7ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.8ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 06:11:59.511597' WHERE "purchases"."id" = 142[0m
  [1m[35m (11.3ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (6.2ms)
Completed 200 OK in 430.9ms (Views: 14.6ms | ActiveRecord: 233.3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:11:59 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:13:22 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4307090 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-6ajbf5>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (17.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (2.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (3.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (9.0ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Bob''s Pizza') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 1, "updated_at" = '2013-12-06 06:13:22.783676' WHERE "purchases"."id" = 143[0m
  [1m[35m (5.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (7.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36mPurchaser Load (1.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1[0m
  [1m[35mItem Load (0.7ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Tom''s Awesome Shop') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 2, "item_id" = 2, "updated_at" = '2013-12-06 06:13:22.847463' WHERE "purchases"."id" = 144[0m
  [1m[35m (8.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 3, "item_id" = 3, "updated_at" = '2013-12-06 06:13:22.910057' WHERE "purchases"."id" = 145[0m
  [1m[35m (12.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", nil], ["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["name", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["description", nil], ["price", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "purchaser_id", "qty", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["qty", nil], ["updated_at", Fri, 06 Dec 2013 06:13:22 UTC +00:00]]
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.8ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 1, "item_id" = 3, "updated_at" = '2013-12-06 06:13:22.978660' WHERE "purchases"."id" = 146[0m
  [1m[35m (9.6ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.2ms)
Completed 200 OK in 405.7ms (Views: 13.9ms | ActiveRecord: 189.2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:13:23 -0800
Served asset /jquery.js - 304 Not Modified (4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:13:23 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:13:23 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:13:23 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:13:23 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:13:23 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:13:47 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4307c20 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-c50mkr>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 12.0ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:14:28 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a042a6550 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-th0dox>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 9.8ms

NoMethodError (undefined method `stringify_keys' for :purchaser:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:14:42 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a20213950 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-h5csl8>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.7ms

NoMethodError (undefined method `stringify_keys' for :purchaser:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:14:51 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0cbf3678 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-19edb8q>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 10.1ms

NoMethodError (undefined method `stringify_keys' for :name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:14:55 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f44357c8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-xn2w4s>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 2.1ms

NoMethodError (undefined method `stringify_keys' for :name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:15:14 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a043466e0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-82t8vq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 43.3ms

NoMethodError (undefined method `stringify_keys' for "name":String):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:15:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c450448 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1plt01x>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 10.1ms

NoMethodError (undefined method `stringify_keys' for :name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.3ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:15:30 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f43463d0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1jtdnnz>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 9.7ms

NoMethodError (undefined method `stringify_keys' for :name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:15:47 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a042d4ab8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1wa0lmz>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.2ms

TypeError (exception class/object expected):
  app/models/concerns/import_from_disorganized_hash.rb:11:in `raise'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (32.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:16:14 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a201a1080 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-14f915o>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.6ms

RuntimeError ([[:name, "Snake Plissken"]]):
  app/models/concerns/import_from_disorganized_hash.rb:17:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:17:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0cb9c990 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-21j8rs>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.7ms

RuntimeError (nil):
  app/models/concerns/import_from_disorganized_hash.rb:17:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:17:40 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f44e2cc0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-ewlx2o>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.5ms

RuntimeError (nil):
  app/models/concerns/import_from_disorganized_hash.rb:17:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:17:59 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a1fc80150 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-2zu6w2>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.3ms

RuntimeError (olk):
  app/models/concerns/import_from_disorganized_hash.rb:14:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `reduce'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:18:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c9b73f0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-j4nxci>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.8ms

RuntimeError (nil):
  app/models/concerns/import_from_disorganized_hash.rb:16:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:19:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4434918 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-g8wdil>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 9.5ms

NameError (undefined local variable or method `result' for #<Class:0x007f19f449b9d8>):
  app/models/concerns/import_from_disorganized_hash.rb:14:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `select'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:19:15 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a1e00bab0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-17yiylx>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.3ms

NoMethodError (undefined method `to_sym=' for "name":String):
  app/models/concerns/import_from_disorganized_hash.rb:14:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `select'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:19:35 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c924410 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1sl38ws>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.0ms

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/models/concerns/import_from_disorganized_hash.rb:14: syntax error, unexpected =>, expecting keyword_end
      parts[1].to_sym => v
                        ^):
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:19:53 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f43ae610 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-xhbqlo>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.8ms

SyntaxError (/home/dreamr/dev/challenges/data-engineering/migration_app/app/models/concerns/import_from_disorganized_hash.rb:15: syntax error, unexpected keyword_end, expecting ']'
/home/dreamr/dev/challenges/data-engineering/migration_app/app/models/concerns/import_from_disorganized_hash.rb:19: syntax error, unexpected end-of-input, expecting keyword_end):
  app/models/purchaser.rb:2:in `<class:Purchaser>'
  app/models/purchaser.rb:1:in `<top (required)>'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:20:02 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0434e868 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-obo4dr>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 37.9ms

RuntimeError (can't add a new key into hash during iteration):
  app/models/concerns/import_from_disorganized_hash.rb:14:in `[]='
  app/models/concerns/import_from_disorganized_hash.rb:14:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `select'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:21:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c443ea0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1mzfhl5>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.1ms

NoMethodError (undefined method `split' for :purchaser_name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:11:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:21:21 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4305010 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1bvscf5>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.1ms

NoMethodError (undefined method `split' for :purchaser_name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:11:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:21:23 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f44e21f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1qb79gm>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.0ms

NoMethodError (undefined method `split' for :purchaser_name:Symbol):
  app/models/concerns/import_from_disorganized_hash.rb:11:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:21:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a1d9cd018 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-kasyf9>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.7ms

NoMethodError (undefined method `to_sym' for nil:NilClass):
  app/models/concerns/import_from_disorganized_hash.rb:11:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:23:06 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c812e28 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-16c3dz7>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 11.1ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: purchaser_name, item_description, item_price, purchase_count, merchant_address, merchant_name):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:24:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4391f10 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1le38xq>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 5.8ms

TypeError (nil is not a symbol):
  app/models/concerns/import_from_disorganized_hash.rb:13:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.6ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:25:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0432fd00 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-32t58h>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 35.5ms

NoMethodError (undefined method `to_sym' for nil:NilClass):
  app/models/concerns/import_from_disorganized_hash.rb:13:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:25:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f1a0c40fdf8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-1icdxke>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 6.4ms

RuntimeError (purchaser_name):
  app/models/concerns/import_from_disorganized_hash.rb:12:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:25:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f42da540 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-7mxy15>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 8.0ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: count):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:26:13 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f19f4741778 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-9676-4fw0xg>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 10.7ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: count):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (31.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.8ms)
Connecting to database specified by database.yml
  [1m[36m (17.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (62.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreatePurchasers (20131205205126)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (53.7ms)[0m  [1mCREATE TABLE "purchasers" ("id" serial primary key, "name" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205126')
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateMerchants (20131205205310)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (70.0ms)[0m  [1mCREATE TABLE "merchants" ("id" serial primary key, "name" character varying(255), "address" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205310')
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateItems (20131205205331)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (70.7ms)[0m  [1mCREATE TABLE "items" ("id" serial primary key, "description" character varying(255), "price" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205205331')
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
Migrating to CreatePurchases (20131205220255)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (36.9ms)[0m  [1mCREATE TABLE "purchases" ("id" serial primary key, "purchaser_id" integer, "item_id" integer, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20131205220255')
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:28:01 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70146e02b8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-197t59v>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 33.8ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: count):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:28:04 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f702871cc40 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-190bhw0>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 1.7ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: count):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.9ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:28:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70146a8750 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-1anavok>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 11.5ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: count):
  app/models/concerns/import_from_disorganized_hash.rb:5:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:30:18 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70148e6ee0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-1p7epal>>, "commit"=>"import!"}
Completed 500 Internal Server Error in 16.1ms

RuntimeError (true):
  app/models/concerns/import_from_disorganized_hash.rb:13:in `block in sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `each'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `map'
  app/models/concerns/import_from_disorganized_hash.rb:11:in `sanitize_attributes'
  app/models/concerns/import_from_disorganized_hash.rb:4:in `import'
  lib/purchases_from_tab_file.rb:8:in `block in call'
  lib/purchases_from_tab_file.rb:5:in `map'
  lib/purchases_from_tab_file.rb:5:in `call'
  app/controllers/imports_controller.rb:8:in `create'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:30:26 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70288a6f48 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-kzifs3>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (6.1ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (34.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (12.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (4.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (3.5ms)[0m  COMMIT
  [1m[36mPurchaser Load (2.5ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.8ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.7ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (12.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (8.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (5.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (9.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (10.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[35m (8.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:26 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (6.5ms)
Completed 500 Internal Server Error in 365.1ms

ActionView::Template::Error (undefined method `price' for nil:NilClass):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `block in gross'
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:30:58 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70282540a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-vsvjjt>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (5.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (4.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (5.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (3.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.7ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (9.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (5.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:30:58 UTC +00:00]]
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.5ms)
Completed 500 Internal Server Error in 327.1ms

ActionView::Template::Error (undefined method `price' for nil:NilClass):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `block in gross'
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:31:01 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f701509fc90 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-6u8umv>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (26.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (4.8ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (8.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.7ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.7ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (8.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:01 UTC +00:00]]
  [1m[36m (5.1ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.6ms)
Completed 500 Internal Server Error in 244.7ms

ActionView::Template::Error (undefined method `price' for nil:NilClass):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `block in gross'
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (35.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.4ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:31:16 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7028c952d0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-1fmvnfa>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (19.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (3.0ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (12.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (7.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (5.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (9.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (8.6ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (8.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (4.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:31:16 UTC +00:00]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE (name = NULL) LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT "items".* FROM "items" WHERE (description = NULL) LIMIT 1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT "merchants".* FROM "merchants" WHERE (name = NULL) LIMIT 1
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (2.1ms)
Completed 500 Internal Server Error in 306.0ms

ActionView::Template::Error ([#<Purchase id: 13, purchaser_id: nil, item_id: nil, count: 2, created_at: "2013-12-06 06:31:16", updated_at: "2013-12-06 06:31:16">, #<Purchase id: 14, purchaser_id: nil, item_id: nil, count: 5, created_at: "2013-12-06 06:31:16", updated_at: "2013-12-06 06:31:16">, #<Purchase id: 15, purchaser_id: nil, item_id: nil, count: 1, created_at: "2013-12-06 06:31:16", updated_at: "2013-12-06 06:31:16">, #<Purchase id: 16, purchaser_id: nil, item_id: nil, count: 4, created_at: "2013-12-06 06:31:16", updated_at: "2013-12-06 06:31:16">]):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:32:09 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7015175318 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-138nt6a>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (24.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Bob''s Pizza') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mUPDATE "purchases" SET "item_id" = 1, "updated_at" = '2013-12-06 06:32:09.768081' WHERE "purchases"."id" = 17[0m
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Tom''s Awesome Shop') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mUPDATE "purchases" SET "item_id" = 2, "updated_at" = '2013-12-06 06:32:09.835394' WHERE "purchases"."id" = 18[0m
  [1m[35m (11.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "item_id" = 3, "updated_at" = '2013-12-06 06:32:09.903070' WHERE "purchases"."id" = 19[0m
  [1m[35m (87.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:09 UTC +00:00]]
  [1m[36m (39.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:32:10 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:10 UTC +00:00]]
  [1m[35m (28.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:10 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:32:10 UTC +00:00]]
  [1m[36m (62.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:32:10 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:10 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mUPDATE "purchases" SET "item_id" = 3, "updated_at" = '2013-12-06 06:32:10.154051' WHERE "purchases"."id" = 20[0m
  [1m[35m (3.2ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.4ms)
Completed 500 Internal Server Error in 594.0ms

ActionView::Template::Error ([#<Purchase id: 17, purchaser_id: nil, item_id: 1, count: 2, created_at: "2013-12-06 06:32:09", updated_at: "2013-12-06 06:32:09">, #<Purchase id: 18, purchaser_id: nil, item_id: 2, count: 5, created_at: "2013-12-06 06:32:09", updated_at: "2013-12-06 06:32:09">, #<Purchase id: 19, purchaser_id: nil, item_id: 3, count: 1, created_at: "2013-12-06 06:32:09", updated_at: "2013-12-06 06:32:09">, #<Purchase id: 20, purchaser_id: nil, item_id: 3, count: 4, created_at: "2013-12-06 06:32:10", updated_at: "2013-12-06 06:32:10">]):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:32:45 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70151335d0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-a5zl7o>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (21.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (12.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (9.4ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.9ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$10 off $20 of food') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Bob''s Pizza') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "item_id" = 1, "updated_at" = '2013-12-06 06:32:45.805695' WHERE "purchases"."id" = 21[0m
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (3.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (5.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Amy Pond') LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$30 of awesome for $10') LIMIT 1
  [1m[36mMerchant Load (0.7ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Tom''s Awesome Shop') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "item_id" = 2, "updated_at" = '2013-12-06 06:32:45.868244' WHERE "purchases"."id" = 22[0m
  [1m[35m (10.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (5.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (3.7ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.8ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Marty McFly') LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "item_id" = 3, "updated_at" = '2013-12-06 06:32:45.934129' WHERE "purchases"."id" = 23[0m
  [1m[35m (11.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[36m (4.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:32:45 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE (name = 'Snake Plissken') LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT "items".* FROM "items" WHERE (description = '$20 Sneakers for $5') LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE (name = 'Sneaker Store Emporium') LIMIT 1[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mUPDATE "purchases" SET "item_id" = 3, "updated_at" = '2013-12-06 06:32:45.999245' WHERE "purchases"."id" = 24[0m
  [1m[35m (12.8ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.8ms)
Completed 500 Internal Server Error in 413.1ms

ActionView::Template::Error ([#<Purchase id: 21, purchaser_id: nil, item_id: 1, count: 2, created_at: "2013-12-06 06:32:45", updated_at: "2013-12-06 06:32:45">, #<Purchase id: 22, purchaser_id: nil, item_id: 2, count: 5, created_at: "2013-12-06 06:32:45", updated_at: "2013-12-06 06:32:45">, #<Purchase id: 23, purchaser_id: nil, item_id: 3, count: 1, created_at: "2013-12-06 06:32:45", updated_at: "2013-12-06 06:32:45">, #<Purchase id: 24, purchaser_id: nil, item_id: 3, count: 4, created_at: "2013-12-06 06:32:45", updated_at: "2013-12-06 06:32:45">]):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.5ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:35:05 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7014947e20 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-1777kwr>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (17.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (4.5ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 25, "item_id" = 25, "updated_at" = '2013-12-06 06:35:05.656025' WHERE "purchases"."id" = 25
  [1m[36m (10.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (4.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (3.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 26, "item_id" = 26, "updated_at" = '2013-12-06 06:35:05.715285' WHERE "purchases"."id" = 26[0m
  [1m[35m (8.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 27, "item_id" = 27, "updated_at" = '2013-12-06 06:35:05.772317' WHERE "purchases"."id" = 27
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:05 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 28, "item_id" = 28, "updated_at" = '2013-12-06 06:35:05.827295' WHERE "purchases"."id" = 28[0m
  [1m[35m (6.3ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (2.0ms)
Completed 500 Internal Server Error in 354.8ms

ActionView::Template::Error ([#<Purchase id: 25, purchaser_id: 25, item_id: 25, count: 2, created_at: "2013-12-06 06:35:05", updated_at: "2013-12-06 06:35:05">, #<Purchase id: 26, purchaser_id: 26, item_id: 26, count: 5, created_at: "2013-12-06 06:35:05", updated_at: "2013-12-06 06:35:05">, #<Purchase id: 27, purchaser_id: 27, item_id: 27, count: 1, created_at: "2013-12-06 06:35:05", updated_at: "2013-12-06 06:35:05">, #<Purchase id: 28, purchaser_id: 28, item_id: 28, count: 4, created_at: "2013-12-06 06:35:05", updated_at: "2013-12-06 06:35:05">]):
    1: <p>total gross: <%= number_to_currency Purchase.gross(@purchases) %></p>
  app/models/purchase.rb:19:in `gross'
  app/views/imports/create.html.erb:1:in `_app_views_imports_create_html_erb___3664513533623988532_70059679225660'


  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /home/dreamr/.gem/ruby/2.0.0/gems/actionpack-3.2.16/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.7ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f70147d7b80 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-1hyzbaa>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (27.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (12.1ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 29, "item_id" = 29, "updated_at" = '2013-12-06 06:35:33.505166' WHERE "purchases"."id" = 29
  [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (3.7ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 30, "item_id" = 30, "updated_at" = '2013-12-06 06:35:33.555814' WHERE "purchases"."id" = 30[0m
  [1m[35m (8.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (5.0ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 31, "item_id" = 31, "updated_at" = '2013-12-06 06:35:33.612830' WHERE "purchases"."id" = 31
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (1.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:35:33 UTC +00:00]]
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 32, "item_id" = 32, "updated_at" = '2013-12-06 06:35:33.702520' WHERE "purchases"."id" = 32[0m
  [1m[35m (4.7ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (7.9ms)
Completed 200 OK in 391.8ms (Views: 26.2ms | ActiveRecord: 177.7ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Served asset /imports.css - 304 Not Modified (4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Served asset /application.css - 304 Not Modified (6ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Served asset /jquery_ujs.js - 304 Not Modified (4ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Served asset /imports.js - 304 Not Modified (3ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Served asset /jquery.js - 304 Not Modified (6ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:35:33 -0800
Served asset /application.js - 304 Not Modified (12ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7014740af0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-1x89ehv>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (10.8ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 33, "item_id" = 33, "updated_at" = '2013-12-06 06:38:31.515278' WHERE "purchases"."id" = 33
  [1m[36m (4.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (4.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (4.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 34, "item_id" = 34, "updated_at" = '2013-12-06 06:38:31.568483' WHERE "purchases"."id" = 34[0m
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 35, "item_id" = 35, "updated_at" = '2013-12-06 06:38:31.625895' WHERE "purchases"."id" = 35
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (4.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:31 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 36, "item_id" = 36, "updated_at" = '2013-12-06 06:38:31.681294' WHERE "purchases"."id" = 36[0m
  [1m[35m (5.9ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.2ms)
Completed 200 OK in 340.9ms (Views: 14.9ms | ActiveRecord: 155.1ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Served asset /imports.css - 304 Not Modified (1ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:31 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:38:36 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f7015078cf8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10232-5hy98s>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00]]
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00]]
  [1m[35m (2.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00]]
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00]]
  [1m[35m (11.8ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 37, "item_id" = 37, "updated_at" = '2013-12-06 06:38:36.985563' WHERE "purchases"."id" = 37
  [1m[36m (4.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:38:36 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 38, "item_id" = 38, "updated_at" = '2013-12-06 06:38:37.038311' WHERE "purchases"."id" = 38[0m
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[36m (4.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[35m (4.5ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 39, "item_id" = 39, "updated_at" = '2013-12-06 06:38:37.093975' WHERE "purchases"."id" = 39
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[35m (8.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:37 UTC +00:00]]
  [1m[36m (5.1ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 40, "item_id" = 40, "updated_at" = '2013-12-06 06:38:37.148802' WHERE "purchases"."id" = 40[0m
  [1m[35m (5.8ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.2ms)
Completed 200 OK in 338.8ms (Views: 17.0ms | ActiveRecord: 152.2ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:38:37 -0800
Served asset /application.css - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:38:37 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:37 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:37 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:37 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:37 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:38:49 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f34208b5a78 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10368-14dgiaw>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:49 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:38:49 UTC +00:00]]
  [1m[36m (23.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (10.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (7.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (10.0ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE "purchases" SET "purchaser_id" = 41, "item_id" = 41, "updated_at" = '2013-12-06 06:38:50.145049' WHERE "purchases"."id" = 41
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (3.9ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 42, "item_id" = 42, "updated_at" = '2013-12-06 06:38:50.199498' WHERE "purchases"."id" = 42[0m
  [1m[35m (7.8ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (73.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (41.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (63.9ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 43, "item_id" = 43, "updated_at" = '2013-12-06 06:38:50.410678' WHERE "purchases"."id" = 43
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:38:50 UTC +00:00]]
  [1m[36m (5.3ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 44, "item_id" = 44, "updated_at" = '2013-12-06 06:38:50.467199' WHERE "purchases"."id" = 44[0m
  [1m[35m (5.0ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (5.8ms)
Completed 200 OK in 627.3ms (Views: 64.5ms | ActiveRecord: 349.7ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:38:50 -0800
Served asset /application.css - 304 Not Modified (9ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:50 -0800
Served asset /application.js - 304 Not Modified (41ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:50 -0800
Served asset /jquery.js - 304 Not Modified (3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:50 -0800
Served asset /jquery_ujs.js - 304 Not Modified (4ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:38:50 -0800
Served asset /imports.css - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:38:50 -0800
Served asset /imports.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f342058f0b0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10368-xm6ux8>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (15.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (12.5ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE "purchases" SET "purchaser_id" = 45, "item_id" = 45, "updated_at" = '2013-12-06 06:41:00.651246' WHERE "purchases"."id" = 45
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (3.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 46, "item_id" = 46, "updated_at" = '2013-12-06 06:41:00.711172' WHERE "purchases"."id" = 46[0m
  [1m[35m (8.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (4.4ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 47, "item_id" = 47, "updated_at" = '2013-12-06 06:41:00.768418' WHERE "purchases"."id" = 47
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (11.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:00 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 48, "item_id" = 48, "updated_at" = '2013-12-06 06:41:00.868049' WHERE "purchases"."id" = 48[0m
  [1m[35m (5.6ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.3ms)
Completed 200 OK in 380.2ms (Views: 13.1ms | ActiveRecord: 178.4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Served asset /application.css - 304 Not Modified (3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Served asset /jquery.js - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:00 -0800
Served asset /application.js - 304 Not Modified (1ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:41:08 -0800
Connecting to database specified by database.yml
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f8a082138f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10408-1ic0dju>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (18.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (4.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (10.6ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  UPDATE "purchases" SET "purchaser_id" = 49, "item_id" = 49, "updated_at" = '2013-12-06 06:41:09.553725' WHERE "purchases"."id" = 49
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (3.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 50, "item_id" = 50, "updated_at" = '2013-12-06 06:41:09.613094' WHERE "purchases"."id" = 50[0m
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (5.0ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 51, "item_id" = 51, "updated_at" = '2013-12-06 06:41:09.668324' WHERE "purchases"."id" = 51
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:41:09 UTC +00:00]]
  [1m[36m (4.9ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 52, "item_id" = 52, "updated_at" = '2013-12-06 06:41:09.723574' WHERE "purchases"."id" = 52[0m
  [1m[35m (6.1ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (5.9ms)
Completed 200 OK in 469.1ms (Views: 63.5ms | ActiveRecord: 181.3ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:09 -0800
Served asset /jquery.js - 304 Not Modified (8ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:09 -0800
Served asset /imports.js - 304 Not Modified (33ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:41:09 -0800
Served asset /imports.css - 304 Not Modified (2ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:09 -0800
Served asset /jquery_ujs.js - 304 Not Modified (4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:41:09 -0800
Served asset /application.css - 304 Not Modified (2ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:41:09 -0800
Served asset /application.js - 304 Not Modified (15ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f8a086869f8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10408-kcij8c>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (18.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (4.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (6.4ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 53, "item_id" = 53, "updated_at" = '2013-12-06 06:42:49.632336' WHERE "purchases"."id" = 53
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (8.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (2.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 54, "item_id" = 54, "updated_at" = '2013-12-06 06:42:49.683571' WHERE "purchases"."id" = 54[0m
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (3.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 55, "item_id" = 55, "updated_at" = '2013-12-06 06:42:49.738711' WHERE "purchases"."id" = 55
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:42:49 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 56, "item_id" = 56, "updated_at" = '2013-12-06 06:42:49.795149' WHERE "purchases"."id" = 56[0m
  [1m[35m (4.9ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (0.7ms)
Completed 200 OK in 361.4ms (Views: 43.4ms | ActiveRecord: 157.4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Served asset /application.css - 304 Not Modified (4ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Served asset /jquery.js - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:42:49 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f8a084b5520 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10408-1fyrftk>>, "commit"=>"import!"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (22.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (4.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (11.3ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE "purchases" SET "purchaser_id" = 57, "item_id" = 57, "updated_at" = '2013-12-06 06:43:41.351312' WHERE "purchases"."id" = 57
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (4.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 58, "item_id" = 58, "updated_at" = '2013-12-06 06:43:41.413047' WHERE "purchases"."id" = 58[0m
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (3.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE "purchases" SET "purchaser_id" = 59, "item_id" = 59, "updated_at" = '2013-12-06 06:43:41.468131' WHERE "purchases"."id" = 59
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:43:41 UTC +00:00]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 60, "item_id" = 60, "updated_at" = '2013-12-06 06:43:41.524149' WHERE "purchases"."id" = 60[0m
  [1m[35m (5.6ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (2.2ms)
Completed 200 OK in 350.9ms (Views: 13.8ms | ActiveRecord: 172.9ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Served asset /application.css - 304 Not Modified (3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Served asset /application.js - 304 Not Modified (2ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:43:41 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:44:11 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f8a18c595a0 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10408-3l7873>>, "commit"=>"import!"}
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (21.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (171.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (26.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (6.1ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 61, "item_id" = 61, "updated_at" = '2013-12-06 06:44:11.700492' WHERE "purchases"."id" = 61
  [1m[36m (5.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (4.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 62, "item_id" = 62, "updated_at" = '2013-12-06 06:44:11.756662' WHERE "purchases"."id" = 62[0m
  [1m[35m (3.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (4.8ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 63, "item_id" = 63, "updated_at" = '2013-12-06 06:44:11.809942' WHERE "purchases"."id" = 63
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (8.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (6.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[35m (95.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:44:11 UTC +00:00]]
  [1m[36m (52.2ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:13)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 64, "item_id" = 64, "updated_at" = '2013-12-06 06:44:11.997324' WHERE "purchases"."id" = 64[0m
  [1m[35m (41.8ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.0ms)
Completed 200 OK in 597.0ms (Views: 6.7ms | ActiveRecord: 507.8ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:44:12 -0800
Served asset /application.css - 304 Not Modified (5ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:44:12 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:44:12 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:44:12 -0800
Served asset /application.js - 304 Not Modified (3ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:44:12 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:44:12 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started POST "/imports/create" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3dZZjK5HSG+32JkhpS0sTifQ8U2o23t+xH2P3u+uMDQ=", "csv_file"=>#<ActionDispatch::Http::UploadedFile:0x007f8a088c35b8 @original_filename="example_input.tab", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"csv_file\"; filename=\"example_input.tab\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<Tempfile:/tmp/RackMultipart20131205-10408-1tgwtbj>>, "commit"=>"import!"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (13.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "987 Fake St"], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (8.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["description", "$10 off $20 of food"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 2], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (13.0ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 65, "item_id" = 65, "updated_at" = '2013-12-06 06:46:08.420597' WHERE "purchases"."id" = 65
  [1m[36m (3.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "456 Unreal Rd"], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["description", "$30 of awesome for $10"], ["price", "10.0"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (4.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 5], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 66, "item_id" = 66, "updated_at" = '2013-12-06 06:46:08.474965' WHERE "purchases"."id" = 66[0m
  [1m[35m (5.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (6.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["count", 1], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (5.7ms)[0m  COMMIT
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE "purchases" SET "purchaser_id" = 67, "item_id" = 67, "updated_at" = '2013-12-06 06:46:08.529766' WHERE "purchases"."id" = 67
  [1m[36m (6.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["address", "123 Fake St"], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "price", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["description", "$20 Sneakers for $5"], ["price", "5.0"], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "item_id", "purchaser_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["count", 4], ["created_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00], ["item_id", nil], ["purchaser_id", nil], ["updated_at", Fri, 06 Dec 2013 06:46:08 UTC +00:00]]
  [1m[36m (4.1ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: You're trying to create an attribute `merchant_id'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from map_child_data at /home/dreamr/dev/challenges/data-engineering/migration_app/app/models/purchase.rb:14)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE "purchases" SET "purchaser_id" = 68, "item_id" = 68, "updated_at" = '2013-12-06 06:46:08.585042' WHERE "purchases"."id" = 68[0m
  [1m[35m (6.2ms)[0m  COMMIT
  Rendered imports/create.html.erb within layouts/application (1.2ms)
Completed 200 OK in 378.6ms (Views: 15.5ms | ActiveRecord: 161.9ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Served asset /application.css - 304 Not Modified (6ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Served asset /jquery.js - 304 Not Modified (1ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Served asset /jquery_ujs.js - 304 Not Modified (0ms)


Started GET "/assets/imports.css?body=1" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Served asset /imports.css - 304 Not Modified (0ms)


Started GET "/assets/imports.js?body=1" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Served asset /imports.js - 304 Not Modified (0ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-12-05 22:46:08 -0800
Served asset /application.js - 304 Not Modified (1ms)
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35m (287.0ms)[0m  DROP DATABASE IF EXISTS "migration_app_test"
  [1m[36m (1549.4ms)[0m  [1mCREATE DATABASE "migration_app_test" ENCODING = 'unicode'[0m
  [1m[35m (118.6ms)[0m  CREATE TABLE "items" ("id" serial primary key, "description" character varying(255), "price" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (120.4ms)[0m  [1mCREATE TABLE "merchants" ("id" serial primary key, "name" character varying(255), "address" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (64.1ms)[0m  CREATE TABLE "purchasers" ("id" serial primary key, "name" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (52.7ms)[0m  [1mCREATE TABLE "purchases" ("id" serial primary key, "purchaser_id" integer, "item_id" integer, "count" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (9.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) 
  [1m[36m (49.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (7.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205220255')[0m
  [1m[35m (21.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131205205310')
  [1m[36m (10.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131205205331')[0m
  [1m[35m (10.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131205205126')
